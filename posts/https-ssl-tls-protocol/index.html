<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="HTTPS 简介# 通过上一篇的HTTPS 之密码学基础，现在可以正式进入 HTTPS 的介绍了。HTTPS 指的是超文本传输安全协议（HyperText Transfer Protocol Secure），顾名思义，比 HTTP 多了一个“安全”，而这里的安全指的就是 SSL/TLS 协议了，即 HTTPS 是由 HTTP + SSL/TLS 协议组成的。
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yindongliang.com/posts/https-ssl-tls-protocol/"><meta property="og:site_name" content="LYon's Blog"><meta property="og:title" content="HTTPS 的 SSL/TLS 协议"><meta property="og:description" content="HTTPS 简介# 通过上一篇的HTTPS 之密码学基础，现在可以正式进入 HTTPS 的介绍了。HTTPS 指的是超文本传输安全协议（HyperText Transfer Protocol Secure），顾名思义，比 HTTP 多了一个“安全”，而这里的安全指的就是 SSL/TLS 协议了，即 HTTPS 是由 HTTP + SSL/TLS 协议组成的。"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-18T13:05:57+08:00"><meta property="article:tag" content="HTTP"><meta property="article:tag" content="Recommended"><meta property="article:tag" content="计算机网络"><meta property="article:tag" content="系统设计"><meta property="article:tag" content="密码学"><meta property="article:tag" content="浏览器"><meta itemprop=name content="HTTPS 的 SSL/TLS 协议"><meta itemprop=description content="HTTPS 简介# 通过上一篇的HTTPS 之密码学基础，现在可以正式进入 HTTPS 的介绍了。HTTPS 指的是超文本传输安全协议（HyperText Transfer Protocol Secure），顾名思义，比 HTTP 多了一个“安全”，而这里的安全指的就是 SSL/TLS 协议了，即 HTTPS 是由 HTTP + SSL/TLS 协议组成的。"><meta itemprop=datePublished content="2021-12-16T00:00:00+00:00"><meta itemprop=dateModified content="2025-10-18T13:05:57+08:00"><meta itemprop=wordCount content="4340"><meta itemprop=keywords content="HTTP,Recommended,计算机网络,系统设计,密码学,浏览器,面试题"><title>HTTPS 的 SSL/TLS 协议
</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yindongliang.com/posts/https-ssl-tls-protocol/><link rel=stylesheet href=/book.min.a819b99fb8b1f20e4f7e1635e6e34a04819155a6612b5c17580e602b60473acd.css integrity="sha256-qBm5n7ix8g5PfhY15uNKBIGRVaZhK1wXWA5gK2BHOs0=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh.search.min.bb2a443b0e9be73753b1dd065f5e92404802b76fcb85c7a4e4ef2161b7aa94bb.js integrity="sha256-uypEOw6b5zdTsd0GX16SQEgCt2/Lhcek5O8hYbeqlLs=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q20952BPE6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"?gtag("config","G-Q20952BPE6"):console.log("Google Analytics 在本地环境已禁用")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1305150098246428" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-posts"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.gif alt><span>LYon's Blog</span></a></h2><div class="book-search hidden"><div class=search-wrapper><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/>
<button class=shortcut-hint onclick=openGlobalSearch()>⌘+k</button></div><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><style>.search-wrapper{position:relative;width:100%}.shortcut-hint{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:#e5e5e5;color:#606060;font-weight:700;font-size:12px;padding:2px 5px;border-radius:4px;border:none;cursor:pointer;font-family:system-ui,-apple-system,BlinkMacSystemFont,segoe ui,Roboto,sans-serif;transition:background-color .2s}.shortcut-hint:hover{background:#d0d0d0}@media(prefers-color-scheme:dark){.shortcut-hint{background:#3a3a3a;color:silver}}#book-search-input:focus+.shortcut-hint,#book-search-input:not(:placeholder-shown)+.shortcut-hint{display:none}</style><script>document.querySelector(".book-search").classList.remove("hidden");function openGlobalSearch(){typeof window.openSearch=="function"&&window.openSearch()}</script><ul><li><a href=/archives>✔️ Archives</a></li><li><a href=/tags>🏷️ Tags</a></li><li><a href=/weekly>🔥 Weekly</a></li><li><a href=/portfolio>📱 Portfolio</a></li><li><a href=/about>👨‍💻 About</a></li><li><a href=https://github.com/tcitry target=_blank rel=noopener>Github</a></li><li><a href=/posts/index.xml target=_blank rel=noopener>RSS</a></li></ul></ul><hr class=hr-edge-weak><ul><li><input type=checkbox id=section-314ad9d9be861ec3f0880a6ae77f6fd8 class=toggle>
<label for=section-314ad9d9be861ec3f0880a6ae77f6fd8 class=flex><a href=/docs/Algorithms/>Algorithms</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-66052e381e337c80041e986f41f35393 class=toggle>
<label for=section-66052e381e337c80041e986f41f35393 class=flex><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>数据结构</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8/>链表（Linked list）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E7%BB%84/>数组（Array）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AD%97%E7%AC%A6%E4%B8%B2/>字符串（String）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/>队列（Queue）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%88/>栈（Stack）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E8%A1%A8/>哈希表（Hash Table）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%A0%91/>二叉树（Binary Tree）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A0%86/>堆（Heap）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%89%8D%E7%BC%80%E6%A0%91/>前缀树（Trie）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%A2%E9%BB%91%E6%A0%91/>红黑树</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B-tree/>B 树</a></li></ul></li><li><input type=checkbox id=section-86cd5821528b896492c96a324e66c8dd class=toggle>
<label for=section-86cd5821528b896492c96a324e66c8dd class=flex><a role=button>常用算法</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/recursion/>递归</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/>贪心算法</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/>滑动窗口</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/>动态规划</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E5%8F%8C%E6%8C%87%E9%92%88/>双指针</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/>二分查找</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/sorting/>排序</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/BFS-%E5%92%8C-DFS/>BFS 和 DFS</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/>分治策略</a></li><li><a href=/docs/Algorithms/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/%E5%89%8D%E7%BC%80%E5%92%8C/>前缀和</a></li></ul></li><li><input type=checkbox id=section-34bad8fbc10deb80de2f09c3cc0530c9 class=toggle>
<label for=section-34bad8fbc10deb80de2f09c3cc0530c9 class=flex><a role=button>经典问题</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Algorithms/%E7%BB%8F%E5%85%B8%E9%97%AE%E9%A2%98/%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D/>打家劫舍</a></li><li><a href=/docs/Algorithms/%E7%BB%8F%E5%85%B8%E9%97%AE%E9%A2%98/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D/>字符串匹配</a></li></ul></li><li><input type=checkbox id=section-ac8b5e8b726b131886339f9ee23a6e69 class=toggle>
<label for=section-ac8b5e8b726b131886339f9ee23a6e69 class=flex><a href=/docs/Algorithms/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/>数学基础</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Algorithms/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E5%BE%AE%E7%A7%AF%E5%88%86/>微积分</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E6%A6%82%E7%8E%87%E7%BB%9F%E8%AE%A1/>概率统计</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/>线性代数（矩阵）</a></li><li><a href=/docs/Algorithms/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88/>排列组合</a></li></ul></li><li><input type=checkbox id=section-4b0ebb40cbbbb412179b88566d3486a5 class=toggle>
<label for=section-4b0ebb40cbbbb412179b88566d3486a5 class=flex><a href=/docs/Algorithms/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/>机器学习</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Algorithms/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%9B%86%E4%BD%93%E6%99%BA%E6%85%A7%E7%BC%96%E7%A8%8B/>集体智慧编程</a></li><li><a href=/docs/Algorithms/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%91%A8%E5%BF%97%E5%8D%8E%E8%A5%BF%E7%93%9C%E4%B9%A6/>周志华西瓜书</a></li><li><a href=/docs/Algorithms/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/>神经网络</a></li></ul></li><li><input type=checkbox id=section-399a3ce1b28a632dfb63e62135e3237a class=toggle>
<label for=section-399a3ce1b28a632dfb63e62135e3237a class=flex><a role=button>特征工程</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li></ul></li><li><input type=checkbox id=section-0be1786619d7dda06269d41faa748c0c class=toggle>
<label for=section-0be1786619d7dda06269d41faa748c0c class=flex><a href=/docs/LLM/>LLM</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-357ec6c5cca7d8ca60c1c5962ef587af class=toggle>
<label for=section-357ec6c5cca7d8ca60c1c5962ef587af class=flex><a role=button>基础概念</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/LLM/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/BPE-%E5%AD%90%E8%AF%8D%E5%88%86%E8%AF%8D%E7%AE%97%E6%B3%95/>BPE 子词分词算法</a></li><li><a href=/docs/LLM/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/One-Hot-%E7%BC%96%E7%A0%81/>One-Hot 编码</a></li><li><a href=/docs/LLM/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/Embedding/>Embedding</a></li><li><a href=/docs/LLM/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/Word2Vec/>Word2Vec</a></li></ul></li><li><input type=checkbox id=section-1fe67da5f6f5f353220c91189311ad84 class=toggle>
<label for=section-1fe67da5f6f5f353220c91189311ad84 class=flex><a role=button>Agent</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-7d9fbf23ac7cf31b39a72a6189a62a31 class=toggle>
<label for=section-7d9fbf23ac7cf31b39a72a6189a62a31 class=flex><a role=button>Infra</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><a href=/docs/LLM/MCP/>MCP</a></li></ul></li><li><input type=checkbox id=section-116a06649c989a297c4b7e49080ab1c3 class=toggle>
<label for=section-116a06649c989a297c4b7e49080ab1c3 class=flex><a role=button>Awesome</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Awesome/awesome-clouds-services/>一些云服务商</a></li><li><a href=/docs/Awesome/awesome-frontend/>好用的前端工具</a></li><li><a href=/docs/Awesome/awesome-product-design/>好看的产品设计</a></li><li><a href=/docs/Awesome/awesome-mac-apps/>好玩的 Apps 集合</a></li><li><a href=/docs/Awesome/awesome-ai-tools/>好用的 AI 工具</a></li><li><a href=/docs/Awesome/Awesome-Blog/>关注的博客站点</a></li><li><a href=/docs/Awesome/VSCode/>VSCode 使用技巧</a></li><li><a href=/docs/Awesome/mac-tips/>Mac 技巧</a></li></ul></li><li><input type=checkbox id=section-69cf9d1dba24842a1c47e98fccb5c80c class=toggle>
<label for=section-69cf9d1dba24842a1c47e98fccb5c80c class=flex><a href=/docs/Apple/>Apple</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-605e780231ce6135ee320dc71fb88536 class=toggle>
<label for=section-605e780231ce6135ee320dc71fb88536 class=flex><a href=/docs/Apple/Swift/>Swift</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Swift/%E8%AF%AD%E6%B3%95/>语法</a></li><li><input type=checkbox id=section-b1641553b96cfa5b7528c58652fd811e class=toggle>
<label for=section-b1641553b96cfa5b7528c58652fd811e class=flex><a role=button>数据结构</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Swift/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Tuple/>元组（Tuple）</a></li><li><a href=/docs/Apple/Swift/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/String/>字符串（String）</a></li><li><a href=/docs/Apple/Swift/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Set/>集合（Set）</a></li><li><a href=/docs/Apple/Swift/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Array/>数组（Array）</a></li><li><a href=/docs/Apple/Swift/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Dict/>字典（Dict）</a></li></ul></li><li><input type=checkbox id=section-30bb3fd70c16241d8eda6dadb346afa5 class=toggle>
<label for=section-30bb3fd70c16241d8eda6dadb346afa5 class=flex><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/>并发编程</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Actor-%E6%A8%A1%E5%9E%8B/>Actor 模型</a></li><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/>线程安全</a></li><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/async-await/>async/await</a></li><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Distributed/>Distributed</a></li><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/MainActor/>MainActor</a></li><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Sendable/>Sendable</a></li><li><a href=/docs/Apple/Swift/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Synchronization/>Synchronization</a></li></ul></li><li><input type=checkbox id=section-0df345b5f86208512b41ba4c5f3974bb class=toggle>
<label for=section-0df345b5f86208512b41ba4c5f3974bb class=flex><a role=button>关键字</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/fileprivate/>fileprivate</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/unknown/>@unknown</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-throws/>throws</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/escaping/>@escaping</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/Namespace/>@Namespace</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/switch/>switch</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-throw/>throw</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-as/>as</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-associatedtype/>associatedtype</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-extension/>extension</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-mutating/>mutating</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-required/>required</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-self-and-Self/>self 和 Self</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-some/>some</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-typealias/>typealias</a></li><li><a href=/docs/Apple/Swift/%E5%85%B3%E9%94%AE%E5%AD%97/swift-keyword-where/>where</a></li></ul></li><li><input type=checkbox id=section-084accb9f5d964e80dfc100b67e20f41 class=toggle>
<label for=section-084accb9f5d964e80dfc100b67e20f41 class=flex><a href=/docs/Apple/Swift/%E5%B8%B8%E8%A7%81%E5%8D%8F%E8%AE%AE/>常见协议</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Swift/%E5%B8%B8%E8%A7%81%E5%8D%8F%E8%AE%AE/CodingKey/>CodingKey</a></li><li><a href=/docs/Apple/Swift/%E5%B8%B8%E8%A7%81%E5%8D%8F%E8%AE%AE/Codable/>Codable</a></li><li><a href=/docs/Apple/Swift/%E5%B8%B8%E8%A7%81%E5%8D%8F%E8%AE%AE/Hashable/>Hashable</a></li><li><a href=/docs/Apple/Swift/%E5%B8%B8%E8%A7%81%E5%8D%8F%E8%AE%AE/Error/>Error</a></li></ul></li><li><a href=/docs/Apple/Swift/%E7%89%B9%E6%AE%8A%E6%A0%87%E8%AE%B0/>特殊标记</a></li><li><a href=/docs/Apple/Swift/Properties-%E5%B1%9E%E6%80%A7/>属性（Properties）</a></li><li><a href=/docs/Apple/Swift/struct-self/>Struct 中的 self 使用</a></li><li><a href=/docs/Apple/Swift/deinit/>deinit</a></li><li><a href=/docs/Apple/Swift/closure-%E9%97%AD%E5%8C%85/>闭包（closure）（闭包捕获）</a></li><li><a href=/docs/Apple/Swift/swift-class/>类（Class）</a></li><li><a href=/docs/Apple/Swift/swift-generics/>泛型（Generics）</a></li><li><a href=/docs/Apple/Swift/swift-enum/>枚举（Enumerations）</a></li><li><a href=/docs/Apple/Swift/swift-functions/>函数（Functions）</a></li><li><a href=/docs/Apple/Swift/swift-struct/>结构体（Struct）</a></li><li><a href=/docs/Apple/Swift/swift-protocol/>协议（Protocol）</a></li><li><a href=/docs/Apple/Swift/swift-at-sign-attributes/>@ 符号之属性</a></li><li><a href=/docs/Apple/Swift/swift-dollar-sign/>$ 美元符号</a></li><li><a href=/docs/Apple/Swift/swift-key-path-expression/>key-path 表达式</a></li><li><a href=/docs/Apple/Swift/swift-optional-type/>可选类型</a></li></ul></li><li><input type=checkbox id=section-02ce13984ec9eefbcfde27ab0d6472d1 class=toggle>
<label for=section-02ce13984ec9eefbcfde27ab0d6472d1 class=flex><a href=/docs/Apple/SwiftUI/>SwiftUI</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-5e3aa7b6a38d223f9e04fa8695f51b4d class=toggle>
<label for=section-5e3aa7b6a38d223f9e04fa8695f51b4d class=flex><a role=button>Animations</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Animation/contentTransition/>contentTransition</a></li><li><a href=/docs/Apple/SwiftUI/Animation/rotationEffect/>rotationEffect</a></li><li><a href=/docs/Apple/SwiftUI/Animation/transition/>transition</a></li><li><a href=/docs/Apple/SwiftUI/Animation/%E8%BF%87%E6%B8%A1%E4%B8%8E%E5%8A%A8%E7%94%BB/>过渡与动画关系</a></li><li><a href=/docs/Apple/SwiftUI/Animation/transaction/>transaction</a></li><li><a href=/docs/Apple/SwiftUI/Animation/Animatable/>Animatable</a></li><li><a href=/docs/Apple/SwiftUI/Animation/animation/>animation</a></li><li><a href=/docs/Apple/SwiftUI/Animation/%E5%8A%A8%E7%94%BB%E7%9A%84%E8%8A%82%E6%B5%81%E4%BA%8E%E9%98%B2%E6%8A%96/>动画的节流与防抖</a></li></ul></li><li><input type=checkbox id=section-6c83c3cff5f35d5be67b13c0fa0352d6 class=toggle>
<label for=section-6c83c3cff5f35d5be67b13c0fa0352d6 class=flex><a role=button>View</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/View/Settings/>Settings</a></li><li><a href=/docs/Apple/SwiftUI/View/TextFieldLink/>TextFieldLink</a></li><li><a href=/docs/Apple/SwiftUI/View/TextEditor/>TextEditor</a></li><li><a href=/docs/Apple/SwiftUI/View/popover/>popover</a></li><li><a href=/docs/Apple/SwiftUI/View/DatePicker/>DatePicker</a></li><li><a href=/docs/Apple/SwiftUI/View/EmptyView/>EmptyView</a></li><li><a href=/docs/Apple/SwiftUI/View/refreshble/>refreshble</a></li><li><a href=/docs/Apple/SwiftUI/View/Scene/>Scene</a></li><li><a href=/docs/Apple/SwiftUI/View/AsyncImage/>AsyncImage</a></li><li><a href=/docs/Apple/SwiftUI/View/ProgressView/>ProgressView</a></li><li><a href=/docs/Apple/SwiftUI/View/Image/>Image</a></li><li><a href=/docs/Apple/SwiftUI/View/Link/>Link</a></li><li><a href=/docs/Apple/SwiftUI/View/Grid/>Grid</a></li><li><a href=/docs/Apple/SwiftUI/View/Preview/>Preview</a></li><li><a href=/docs/Apple/SwiftUI/View/OutlineGroup/>OutlineGroup</a></li><li><a href=/docs/Apple/SwiftUI/View/Table/>Table</a></li><li><a href=/docs/Apple/SwiftUI/View/ActionSheet/>ActionSheet</a></li><li><a href=/docs/Apple/SwiftUI/View/RoundedRectangle/>RoundedRectangle</a></li><li><a href=/docs/Apple/SwiftUI/View/Rectangle/>Rectangle</a></li><li><a href=/docs/Apple/SwiftUI/View/TextField/>TextField</a></li><li><a href=/docs/Apple/SwiftUI/View/Stepper/>Stepper</a></li><li><a href=/docs/Apple/SwiftUI/View/Button/>Button</a></li><li><a href=/docs/Apple/SwiftUI/View/Form/>Form</a></li><li><a href=/docs/Apple/SwiftUI/View/Menu/>Menu</a></li><li><a href=/docs/Apple/SwiftUI/View/indicator/>indicator</a></li><li><a href=/docs/Apple/SwiftUI/View/Picker/>Picker</a></li><li><a href=/docs/Apple/SwiftUI/View/confirmationDialog/>confirmationDialog</a></li><li><a href=/docs/Apple/SwiftUI/View/Section/>Section</a></li><li><a href=/docs/Apple/SwiftUI/View/DisclosureGroup/>DisclosureGroup</a></li><li><a href=/docs/Apple/SwiftUI/View/Label/>Label</a></li><li><a href=/docs/Apple/SwiftUI/View/Alert/>Alert</a></li><li><a href=/docs/Apple/SwiftUI/View/contextMenu/>contextMenu</a></li><li><a href=/docs/Apple/SwiftUI/View/sheet/>sheet</a></li><li><a href=/docs/Apple/SwiftUI/View/Ellipse/>Ellipse</a></li><li><a href=/docs/Apple/SwiftUI/View/Shapes/>Shapes</a></li><li><a href=/docs/Apple/SwiftUI/View/Capsule/>Capsule</a></li><li><a href=/docs/Apple/SwiftUI/View/Group-%E5%92%8C-Section/>Group 和 Section</a></li><li><a href=/docs/Apple/SwiftUI/View/SubmitLabel/>SubmitLabel</a></li></ul></li><li><input type=checkbox id=section-76481e808d89a66eb31ec03ec3bf52d2 class=toggle>
<label for=section-76481e808d89a66eb31ec03ec3bf52d2 class=flex><a role=button>Method</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Method/commands/>commands</a></li><li><a href=/docs/Apple/SwiftUI/Method/FetchRequest/>FetchRequest</a></li><li><a href=/docs/Apple/SwiftUI/Method/%E5%8D%95%E5%A4%8D%E6%95%B0/>单复数形式</a></li><li><a href=/docs/Apple/SwiftUI/Method/tag/>tag</a></li><li><a href=/docs/Apple/SwiftUI/Method/ViewModifier/>ViewModifier</a></li><li><a href=/docs/Apple/SwiftUI/Method/ViewBuilder/>ViewBuilder</a></li><li><a href=/docs/Apple/SwiftUI/Method/help/>help</a></li><li><a href=/docs/Apple/SwiftUI/Method/searchable/>searchable</a></li><li><a href=/docs/Apple/SwiftUI/Method/AppStorage/>AppStorage</a></li><li><a href=/docs/Apple/SwiftUI/Method/Environment/>@Environment</a></li><li><a href=/docs/Apple/SwiftUI/Method/allowsHitTesting/>allowsHitTesting</a></li><li><a href=/docs/Apple/SwiftUI/Method/id/>id</a></li><li><a href=/docs/Apple/SwiftUI/Method/KeyboardShortcut/>KeyboardShortcut</a></li><li><a href=/docs/Apple/SwiftUI/Method/dismiss/>dismiss 使用</a></li></ul></li><li><input type=checkbox id=section-55a04084c30b9fccd19bbc3eebce0df7 class=toggle>
<label for=section-55a04084c30b9fccd19bbc3eebce0df7 class=flex><a href=/docs/Apple/SwiftUI/Layout/>Layout</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Layout/scenePadding/>SwiftUI 中的 scenePadding 修饰符使用场景详解</a></li><li><a href=/docs/Apple/SwiftUI/Layout/alignmentGuide/>alignmentGuide</a></li><li><a href=/docs/Apple/SwiftUI/Layout/safeAreaPadding/>safeAreaPadding 及相关对比</a></li><li><a href=/docs/Apple/SwiftUI/Layout/contentMargins/>contentMargins</a></li><li><a href=/docs/Apple/SwiftUI/Layout/frame/>frame</a></li><li><a href=/docs/Apple/SwiftUI/Layout/containerRelativeFrame/>containerRelativeFrame</a></li><li><a href=/docs/Apple/SwiftUI/Layout/offset/>offset</a></li><li><a href=/docs/Apple/SwiftUI/Layout/LazyVStack/>LazyVStack</a></li><li><a href=/docs/Apple/SwiftUI/Layout/EdgeInsets/>EdgeInsets</a></li><li><a href=/docs/Apple/SwiftUI/Layout/LazyVGrid-%E5%92%8C-LazyHGrid/>LazyVGrid 和 LazyHGrid</a></li><li><a href=/docs/Apple/SwiftUI/Layout/insetGroupSpacing/>insetGroupSpacing</a></li><li><a href=/docs/Apple/SwiftUI/Layout/fullScreenCover/>fullScreenCover</a></li><li><a href=/docs/Apple/SwiftUI/Layout/interactiveDismissDisabled/>interactiveDismissDisabled</a></li><li><a href=/docs/Apple/SwiftUI/Layout/ContentUnavailableView/>ContentUnavailableView</a></li><li><a href=/docs/Apple/SwiftUI/Layout/coordinateSpace/>coordinateSpace</a></li><li><a href=/docs/Apple/SwiftUI/Layout/safeAreaInset/>safeAreaInset</a></li><li><a href=/docs/Apple/SwiftUI/Layout/sidebar-%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/>sidebar 设计规范</a></li><li><a href=/docs/Apple/SwiftUI/Layout/%E8%8E%B7%E5%8F%96%E5%B1%8F%E5%B9%95%E5%AE%BD%E5%BA%A6/>获取屏幕宽度</a></li><li><a href=/docs/Apple/SwiftUI/Layout/%E5%A6%82%E4%BD%95%E5%B1%85%E4%B8%AD/>如何居中</a></li><li><a href=/docs/Apple/SwiftUI/Layout/overlay/>overlay</a></li><li><a href=/docs/Apple/SwiftUI/Layout/position/>position</a></li><li><a href=/docs/Apple/SwiftUI/Layout/ZStack/>ZStack 对齐</a></li><li><a href=/docs/Apple/SwiftUI/Layout/%E9%A1%B6%E9%83%A8-Tab-%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/>顶部 Tab 分页实现方式</a></li><li><a href=/docs/Apple/SwiftUI/Layout/%E9%80%9A%E8%BF%87-TabView-%E5%AE%9E%E7%8E%B0%E4%BE%A7%E8%BE%B9%E6%A0%8F/>通过 TabView 实现侧边栏</a></li><li><a href=/docs/Apple/SwiftUI/Layout/TabView/>TabView</a></li><li><a href=/docs/Apple/SwiftUI/Layout/ignoresSafeArea/>ignoresSafeArea</a></li><li><a href=/docs/Apple/SwiftUI/Layout/padding/>padding</a></li><li><a href=/docs/Apple/SwiftUI/Layout/sheet-and-inspector/>sheet 和 inspector</a></li><li><a href=/docs/Apple/SwiftUI/Layout/WindowGroup-%E5%92%8C-DocumentGroup/>WindowGroup 和 DocumentGroup</a></li><li><a href=/docs/Apple/SwiftUI/Layout/GeometryReader/>GeometryReader</a></li></ul></li><li><input type=checkbox id=section-021aadbc48cfff3df6b8d4acd7641b51 class=toggle>
<label for=section-021aadbc48cfff3df6b8d4acd7641b51 class=flex><a role=button>Style</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Style/ShapeStyle/>ShapeStyle</a></li><li><a href=/docs/Apple/SwiftUI/Style/monospacedDigit/>monospacedDigit</a></li><li><a href=/docs/Apple/SwiftUI/Style/truncationMode/>truncationMode</a></li><li><a href=/docs/Apple/SwiftUI/Style/cornerRadius/>cornerRadius</a></li><li><a href=/docs/Apple/SwiftUI/Style/fixedSize/>fixedSize</a></li><li><a href=/docs/Apple/SwiftUI/Style/aspectRatio/>aspectRatio</a></li><li><a href=/docs/Apple/SwiftUI/Style/resizable/>resizable</a></li><li><a href=/docs/Apple/SwiftUI/Style/containerShape/>containerShape</a></li><li><a href=/docs/Apple/SwiftUI/Style/accentColor/>accentColor</a></li><li><a href=/docs/Apple/SwiftUI/Style/clipped/>clipped</a></li><li><a href=/docs/Apple/SwiftUI/Style/TextSelection/>TextSelection</a></li><li><a href=/docs/Apple/SwiftUI/Style/allowsTightening/>allowsTightening</a></li><li><a href=/docs/Apple/SwiftUI/Style/fontDesign/>fontDesign</a></li><li><a href=/docs/Apple/SwiftUI/Style/presentationBackground/>presentationBackground(sheet)</a></li><li><a href=/docs/Apple/SwiftUI/Style/shadow/>shadow</a></li><li><a href=/docs/Apple/SwiftUI/Style/ButtonStyle/>ButtonStyle</a></li><li><a href=/docs/Apple/SwiftUI/Style/blendMode/>blendMode</a></li><li><a href=/docs/Apple/SwiftUI/Style/redacted/>redacted</a></li><li><a href=/docs/Apple/SwiftUI/Style/blur/>blur</a></li><li><a href=/docs/Apple/SwiftUI/Style/contentShape/>contentShape</a></li><li><a href=/docs/Apple/SwiftUI/Style/strikethrough/>strikethrough</a></li><li><a href=/docs/Apple/SwiftUI/Style/foregroundColor/>foregroundColor</a></li><li><a href=/docs/Apple/SwiftUI/Style/stroke/>stroke</a></li><li><a href=/docs/Apple/SwiftUI/Style/border/>border</a></li><li><a href=/docs/Apple/SwiftUI/Style/background/>background</a></li><li><a href=/docs/Apple/SwiftUI/Style/font/>font</a></li><li><a href=/docs/Apple/SwiftUI/Style/secondarySystemBackground/>secondarySystemBackground</a></li><li><a href=/docs/Apple/SwiftUI/Style/colorScheme/>colorScheme</a></li><li><a href=/docs/Apple/SwiftUI/Style/tint/>tint</a></li><li><a href=/docs/Apple/SwiftUI/Style/clipShape/>clipShape</a></li><li><a href=/docs/Apple/SwiftUI/Style/%E7%B3%BB%E7%BB%9F%E4%B8%BB%E9%A2%98/>系统主题</a></li><li><a href=/docs/Apple/SwiftUI/Style/preferredColorScheme/>preferredColorScheme</a></li></ul></li><li><input type=checkbox id=section-5de17cfd2208d151dbd5d57546bc439d class=toggle>
<label for=section-5de17cfd2208d151dbd5d57546bc439d class=flex><a role=button>Navigation</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Navigation/Navigation/>Navigation</a></li><li><a href=/docs/Apple/SwiftUI/Navigation/Navigation-back/>Navigation 如何回到上级</a></li><li><a href=/docs/Apple/SwiftUI/Navigation/NavigationPath/>NavigationPath</a></li><li><a href=/docs/Apple/SwiftUI/Navigation/navigationBarBackButton/>navigationBarBackButton</a></li><li><a href=/docs/Apple/SwiftUI/Navigation/NavigationLink/>NavigationLink</a></li><li><a href=/docs/Apple/SwiftUI/Navigation/navigationDestination/>navigationDestination</a></li></ul></li><li><input type=checkbox id=section-6066fe458faa2bf77e7cac5daa63e344 class=toggle>
<label for=section-6066fe458faa2bf77e7cac5daa63e344 class=flex><a role=button>Modal Data</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Modal-Data/objectWillChange/>objectWillChange.send() 使用场景详解</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%97%A0%E9%99%90%E9%80%92%E5%BD%92%E9%97%AE%E9%A2%98/>观察者模式引起的无限递归问题</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/ObservableObject/>ObservableObject</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/Observable/>Observable</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/Bindable-%E4%B8%8E-Observable/>Bindable 与 Observable</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/Binding-%E8%87%AA%E5%AE%9A%E4%B9%89/>SwiftUI 中的 @Binding 与自定义绑定</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/Binding/>Binding</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/PreferenceKey/>PreferenceKey</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/onPreferenceChange/>onPreferenceChange</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/FocusState/>FocusState</a></li><li><a href=/docs/Apple/SwiftUI/Modal-Data/SwiftUI-Model-Data/>ObservedObject</a></li></ul></li><li><input type=checkbox id=section-79f849faa4c013f8d4aea47ad4768b31 class=toggle>
<label for=section-79f849faa4c013f8d4aea47ad4768b31 class=flex><a role=button>生命周期</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/onReceive/>onReceive</a></li><li><a href=/docs/Apple/SwiftUI/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/scenePhase/>scenePhase</a></li><li><a href=/docs/Apple/SwiftUI/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/onDelete/>onDelete</a></li><li><a href=/docs/Apple/SwiftUI/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/onSubmit/>onSubmit</a></li><li><a href=/docs/Apple/SwiftUI/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/life-cycle-method/>生命周期 onAppear 等</a></li></ul></li><li><input type=checkbox id=section-c902b1e4135e88b9b3ccf79f02b038a3 class=toggle>
<label for=section-c902b1e4135e88b9b3ccf79f02b038a3 class=flex><a role=button>Gesture</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Gesture/%E5%A4%9A%E4%B8%AA-onTapGesture/>多个 onTapGesture 会怎样？</a></li><li><a href=/docs/Apple/SwiftUI/Gesture/onTapGesture/>onTapGesture</a></li><li><a href=/docs/Apple/SwiftUI/Gesture/DragGesture/>DragGesture</a></li><li><a href=/docs/Apple/SwiftUI/Gesture/GestureState/>GestureState</a></li></ul></li><li><input type=checkbox id=section-4a80858c96bae8866fa727ef764ce9a3 class=toggle>
<label for=section-4a80858c96bae8866fa727ef764ce9a3 class=flex><a role=button>List</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/List/listRowSeparatorLeading/>listRowSeparatorLeading</a></li><li><a href=/docs/Apple/SwiftUI/List/List-%E8%AE%BE%E7%BD%AE%E8%BE%B9%E7%BC%98%E8%BE%B9%E8%B7%9D/>设置边缘边距</a></li><li><a href=/docs/Apple/SwiftUI/List/ForEach/>ForEach</a></li><li><a href=/docs/Apple/SwiftUI/List/List/>List 的修饰符</a></li><li><a href=/docs/Apple/SwiftUI/List/List-%E5%88%97%E8%A1%A8%E4%BF%AE%E9%A5%B0%E7%AC%A6/>List 列表修饰符</a></li><li><a href=/docs/Apple/SwiftUI/List/listStyle/>listStyle</a></li><li><a href=/docs/Apple/SwiftUI/List/swipeActions/>swipeActions</a></li></ul></li><li><input type=checkbox id=section-0b102be5ae64c5e4da033912652e21b5 class=toggle>
<label for=section-0b102be5ae64c5e4da033912652e21b5 class=flex><a role=button>ScrollView</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/ScrollView/defaultScrollAnchor/>defaultScrollAnchor</a></li><li><a href=/docs/Apple/SwiftUI/ScrollView/scrollTargetLayout/>scrollTargetLayout</a></li><li><a href=/docs/Apple/SwiftUI/ScrollView/ScrollView/>ScrollView</a></li><li><a href=/docs/Apple/SwiftUI/ScrollView/ScrollTarget/>ScrollTarget</a></li><li><a href=/docs/Apple/SwiftUI/ScrollView/PinnedScrollableViews/>PinnedScrollableViews</a></li><li><a href=/docs/Apple/SwiftUI/ScrollView/scrollContentBackground/>scrollContentBackground</a></li><li><a href=/docs/Apple/SwiftUI/ScrollView/scrollDismissesKeyboard/>scrollDismissesKeyboard</a></li></ul></li><li><input type=checkbox id=section-8f0f0fcf03f74a07c24b324caa213066 class=toggle>
<label for=section-8f0f0fcf03f74a07c24b324caa213066 class=flex><a role=button>toolbar</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/toolbar/toolbarBackgroundVisibility/>toolbarBackgroundVisibility</a></li><li><a href=/docs/Apple/SwiftUI/toolbar/toolbarVisibility/>toolbarVisibility</a></li><li><a href=/docs/Apple/SwiftUI/toolbar/toolbarBackground/>toolbarBackground</a></li><li><a href=/docs/Apple/SwiftUI/toolbar/ToolbarItemGroup/>ToolbarItemGroup</a></li><li><a href=/docs/Apple/SwiftUI/toolbar/ToolbarTitleMenu/>ToolbarTitleMenu</a></li><li><a href=/docs/Apple/SwiftUI/toolbar/toolbar/>toolbar</a></li></ul></li><li><input type=checkbox id=section-1e27909de7c809f73761e011e775154c class=toggle>
<label for=section-1e27909de7c809f73761e011e775154c class=flex><a role=button>Task</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftUI/Task/TaskPriority/>TaskPriority</a></li><li><a href=/docs/Apple/SwiftUI/Task/translationTask/>translationTask</a></li><li><a href=/docs/Apple/SwiftUI/Task/backgroundTask/>backgroundTask</a></li><li><a href=/docs/Apple/SwiftUI/Task/Task/>Task 和 .task</a></li><li><a href=/docs/Apple/SwiftUI/Task/TaskGroup/>TaskGroup</a></li></ul></li></ul></li><li><input type=checkbox id=section-9280db53475b60924e430c1bf0478e43 class=toggle>
<label for=section-9280db53475b60924e430c1bf0478e43 class=flex><a href=/docs/Apple/Foundation/>Foundation</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Foundation/Locale/>Locale</a></li><li><a href=/docs/Apple/Foundation/LocalizedStringResource/>LocalizedStringResource</a></li><li><a href=/docs/Apple/Foundation/Bundle/>Bundle</a></li><li><a href=/docs/Apple/Foundation/ProcessInfo/>ProcessInfo</a></li><li><a href=/docs/Apple/Foundation/URL/>URL</a></li><li><a href=/docs/Apple/Foundation/JSONEncoder-and-JSONDecoder/>JSONEncoder & JSONDecoder</a></li><li><a href=/docs/Apple/Foundation/Calendar/>Calendar</a></li><li><a href=/docs/Apple/Foundation/Data/>Data</a></li><li><a href=/docs/Apple/Foundation/Thread/>Thread</a></li><li><a href=/docs/Apple/Foundation/Expression/>Expression</a></li><li><a href=/docs/Apple/Foundation/CharacterSet/>CharacterSet</a></li><li><a href=/docs/Apple/Foundation/NSString/>NSString</a></li><li><a href=/docs/Apple/Foundation/NotificationCenter/>NotificationCenter</a></li><li><a href=/docs/Apple/Foundation/Date/>Date</a></li><li><a href=/docs/Apple/Foundation/FileManager/>FileManager</a></li><li><a href=/docs/Apple/Foundation/TimeInterval/>TimeInterval</a></li><li><a href=/docs/Apple/Foundation/Timer/>Timer</a></li><li><a href=/docs/Apple/Foundation/Foundation-Preference-UserDefaults/>UserDefaults</a></li><li><input type=checkbox id=section-51df5b7928e601e536bc9b7c2ee859c5 class=toggle>
<label for=section-51df5b7928e601e536bc9b7c2ee859c5 class=flex><a href=/docs/Apple/Foundation/Filter-and-Sorting/>Filter and Sorting</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Foundation/Filter-and-Sorting/Predicate/>Predicate</a></li><li><a href=/docs/Apple/Foundation/Filter-and-Sorting/KeyPathComparator/>KeyPathComparator</a></li><li><a href=/docs/Apple/Foundation/Filter-and-Sorting/SortComparator/>SortComparator</a></li><li><a href=/docs/Apple/Foundation/Filter-and-Sorting/SortDescriptor/>SortDescriptor</a></li></ul></li></ul></li><li><input type=checkbox id=section-91e609421913a11bb03ec2cc59dfc6d4 class=toggle>
<label for=section-91e609421913a11bb03ec2cc59dfc6d4 class=flex><a href=/docs/Apple/SwiftData/>SwiftData</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/SwiftData/DataStore/>DataStore</a></li><li><a href=/docs/Apple/SwiftData/ModelActor/>ModelActor</a></li><li><a href=/docs/Apple/SwiftData/modelContext/>modelContext</a></li><li><a href=/docs/Apple/SwiftData/PersistentIdentifier/>PersistentIdentifier</a></li><li><a href=/docs/Apple/SwiftData/FetchDescriptor/>FetchDescriptor</a></li><li><a href=/docs/Apple/SwiftData/modelContainer/>modelContainer</a></li><li><a href=/docs/Apple/SwiftData/%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE/>地理位置</a></li><li><a href=/docs/Apple/SwiftData/Attribute/>@Attribute</a></li><li><a href=/docs/Apple/SwiftData/Relationship/>@Relationship</a></li><li><a href=/docs/Apple/SwiftData/Query/>@Query</a></li></ul></li><li><input type=checkbox id=section-1d02d4ec2408c1239ef80bec8adb73aa class=toggle>
<label for=section-1d02d4ec2408c1239ef80bec8adb73aa class=flex><a role=button>Xcode</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Xcode/App-Groups/>App Groups</a></li><li><a href=/docs/Apple/Xcode/iOS-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/>iOS 进程间通信方式</a></li><li><a href=/docs/Apple/Xcode/URL-Scheme/>URL Scheme</a></li><li><a href=/docs/Apple/Xcode/LaunchScreen/>LaunchScreen</a></li><li><a href=/docs/Apple/Xcode/viewmodel-%E5%92%8C-context/>ViewModel 和 Context 概念</a></li><li><a href=/docs/Apple/Xcode/%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC%E5%8F%B7/>构建版本号</a></li><li><a href=/docs/Apple/Xcode/%E8%AE%BE%E7%BD%AE-DEBUG-%E5%BC%80%E5%85%B3/>设置 DEBUG 开关</a></li><li><a href=/docs/Apple/Xcode/The-Composable-Architecture/>The Composable Architecture</a></li><li><a href=/docs/Apple/Xcode/Swift-Package-Manager/>Swift Package Manager</a></li><li><a href=/docs/Apple/Xcode/Xcode-Cloud/>Xcode Cloud</a></li><li><a href=/docs/Apple/Xcode/Playground/>Playground</a></li><li><a href=/docs/Apple/Xcode/xcconfig-%E6%96%87%E4%BB%B6/>xcconfig 文件</a></li><li><a href=/docs/Apple/Xcode/REGISTER_APP_GROUPS/>REGISTER_APP_GROUPS</a></li><li><a href=/docs/Apple/Xcode/%E5%9B%BD%E9%99%85%E5%8C%96/>国际化</a></li><li><a href=/docs/Apple/Xcode/%E6%89%B9%E9%87%8F%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%89%E9%92%AE/>批量自定义按钮</a></li><li><a href=/docs/Apple/Xcode/iPad-tabbar/>iPad tabbar 方案</a></li><li><a href=/docs/Apple/Xcode/Github-Code/>开源示例</a></li><li><a href=/docs/Apple/Xcode/SwiftUI-VIPER/>SwiftUI VIPER 架构</a></li><li><a href=/docs/Apple/Xcode/APNs/>通知机制 APNs</a></li><li><a href=/docs/Apple/Xcode/iOS-%E6%8C%81%E4%B9%85%E5%8C%96%E6%96%B9%E6%A1%88/>iOS 数据持久化方案</a></li><li><a href=/docs/Apple/Xcode/%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E4%B8%80%E4%B8%AA-swift-%E6%96%87%E4%BB%B6/>如何执行一个 swift 文件</a></li><li><a href=/docs/Apple/Xcode/apple-sample-code/>官方示例</a></li></ul></li><li><input type=checkbox id=section-4be8677333c649362c46ef56470c3ce1 class=toggle>
<label for=section-4be8677333c649362c46ef56470c3ce1 class=flex><a href=/docs/Apple/AppKit/>AppKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/AppKit/AppKit-%E5%92%8C-SwiftUI-%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/>AppKit 和 SwiftUI 结合使用</a></li></ul></li><li><input type=checkbox id=section-64a6ad886586127ac812825df57028ca class=toggle>
<label for=section-64a6ad886586127ac812825df57028ca class=flex><a role=button>CloudKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/CloudKit/key-value-storageNSUbiquitousKeyValueStore/>Key-Value Storage</a></li><li><a href=/docs/Apple/CloudKit/CKModifyRecordsOperation/>CKModifyRecordsOperation</a></li><li><a href=/docs/Apple/CloudKit/%E5%86%B2%E7%AA%81%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/>冲突处理机制</a></li><li><a href=/docs/Apple/CloudKit/queryable-%E5%92%8C-searchable/>queryable 和 searchable</a></li><li><a href=/docs/Apple/CloudKit/%E4%B8%BA-cloudkit-%E9%85%8D%E7%BD%AE%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5/>为 CloudKit 配置消息通知</a></li><li><a href=/docs/Apple/CloudKit/Database-Type/>Database 类型</a></li><li><a href=/docs/Apple/CloudKit/Subscriptions/>Subscriptions</a></li><li><a href=/docs/Apple/CloudKit/Zone/>Zone</a></li><li><a href=/docs/Apple/CloudKit/CD_entityName/>CD_entityName(Record Types)</a></li><li><a href=/docs/Apple/CloudKit/Metadata/>Metadata(Record Types)</a></li></ul></li><li><input type=checkbox id=section-e1b7dc93fc63b015df4b6eecf162b0d5 class=toggle>
<label for=section-e1b7dc93fc63b015df4b6eecf162b0d5 class=flex><a role=button>Core Data</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-4e02b621d60e0ce7b12901c3e4a9e085 class=toggle>
<label for=section-4e02b621d60e0ce7b12901c3e4a9e085 class=flex><a href=/docs/Apple/Core-Foundation/>Core Foundation</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-6c5647805aee5062279faaa4df3672ba class=toggle>
<label for=section-6c5647805aee5062279faaa4df3672ba class=flex><a href=/docs/Apple/Frameworks/>Frameworks</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/Background-Tasks/>Background Tasks</a></li><li><a href=/docs/Apple/Frameworks/DispatchQueue/>DispatchQueue</a></li><li><a href=/docs/Apple/Frameworks/Speech/>Speech</a></li><li><a>Core Location</a><ul></ul></li><li><input type=checkbox id=section-a688b18341a0a958be8f78531fd7a838 class=toggle>
<label for=section-a688b18341a0a958be8f78531fd7a838 class=flex><a role=button>ActivityKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/ActivityKit/%E4%BA%A4%E4%BA%92%E5%BC%8F%E6%8C%89%E9%92%AE/>添加交互式按钮</a></li><li><a href=/docs/Apple/Frameworks/ActivityKit/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/>基础概念</a></li><li><a href=/docs/Apple/Frameworks/ActivityKit/%E8%AE%A1%E6%97%B6%E5%99%A8%E7%A4%BA%E4%BE%8B/>计时器示例</a></li></ul></li><li><input type=checkbox id=section-75981e4a8283476a2da9bf50a28a00f6 class=toggle>
<label for=section-75981e4a8283476a2da9bf50a28a00f6 class=flex><a role=button>App Intents</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/App-Intents/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/>基础概念</a></li><li><a href=/docs/Apple/Frameworks/App-Intents/AppEnum/>AppEnum</a></li><li><a href=/docs/Apple/Frameworks/App-Intents/AppShortcut/>AppShortcut</a></li><li><a href=/docs/Apple/Frameworks/App-Intents/Focus-Filters/>Focus Filters</a></li><li><a href=/docs/Apple/Frameworks/App-Intents/AppEntity/>AppEntity</a></li><li><a href=/docs/Apple/Frameworks/App-Intents/%E8%AE%A1%E6%97%B6%E5%99%A8%E7%A4%BA%E4%BE%8B/>计时器示例</a></li></ul></li><li><input type=checkbox id=section-a4230ed9ed3a6ab7f93c82c9c68f2761 class=toggle>
<label for=section-a4230ed9ed3a6ab7f93c82c9c68f2761 class=flex><a href=/docs/Apple/Frameworks/AVFoundation/>AVFoundation</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/AVFoundation/Audio-routing/>Audio routing</a></li><li><a href=/docs/Apple/Frameworks/AVFoundation/AVAudioEngine/>AVAudioEngine</a></li><li><a href=/docs/Apple/Frameworks/AVFoundation/AVAudioPlayer/>AVAudioPlayer</a></li><li><a href=/docs/Apple/Frameworks/AVFoundation/AVAudioRecorder/>AVAudioRecorder</a></li><li><a href=/docs/Apple/Frameworks/AVFoundation/AVFAudio-%E5%92%8C-AVFoundation/>AVFAudio 和 AVFoundation</a></li></ul></li><li><input type=checkbox id=section-b2748f76f713896c7473fae948546c0e class=toggle>
<label for=section-b2748f76f713896c7473fae948546c0e class=flex><a href=/docs/Apple/Frameworks/Combine/>Combine</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/Combine/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/>基础概念</a></li></ul></li><li><input type=checkbox id=section-6344755b2e358fa48e5f81b2339198c3 class=toggle>
<label for=section-6344755b2e358fa48e5f81b2339198c3 class=flex><a role=button>Dispatch</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/Dispatch/%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/>基本介绍</a></li></ul></li><li><input type=checkbox id=section-70aa5b5cc6cf1b687cefc17b628f06b1 class=toggle>
<label for=section-70aa5b5cc6cf1b687cefc17b628f06b1 class=flex><a role=button>MapKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-b8047bc6ed96137d22bfea1fa8c7416f class=toggle>
<label for=section-b8047bc6ed96137d22bfea1fa8c7416f class=flex><a href=/docs/Apple/Frameworks/PhotoKit/>PhotoKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/PhotoKit/PhotosPicker/>PhotosPicker</a></li></ul></li><li><input type=checkbox id=section-de120c9105b0dff3d83852919007871f class=toggle>
<label for=section-de120c9105b0dff3d83852919007871f class=flex><a role=button>SensorKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-5b7053f9ee9086619b59c61ea4532287 class=toggle>
<label for=section-5b7053f9ee9086619b59c61ea4532287 class=flex><a role=button>SiriKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/SiriKit/%E4%BB%8B%E7%BB%8D/>介绍</a></li><li><a href=/docs/Apple/Frameworks/SiriKit/%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B/>完整示例</a></li></ul></li><li><input type=checkbox id=section-5121efef8398f1720798c6eadeb4cf7e class=toggle>
<label for=section-5121efef8398f1720798c6eadeb4cf7e class=flex><a href=/docs/Apple/Frameworks/StoreKit/>StoreKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/StoreKit/In-App-Purchase/>IAP 支付流程</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/SubscriptionStoreView/>SubscriptionStoreView</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/purchase/>purchase</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/Product/>Product</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/sync/>sync</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/Transaction/>Transaction</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/ProductView/>ProductView</a></li><li><a href=/docs/Apple/Frameworks/StoreKit/StoreView/>StoreView</a></li></ul></li><li><input type=checkbox id=section-15c47d1c1e26a51f93d7ee55d52ff0f9 class=toggle>
<label for=section-15c47d1c1e26a51f93d7ee55d52ff0f9 class=flex><a href=/docs/Apple/Frameworks/Swift-Charts/>Swift Charts</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/Swift-Charts/%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/>核心概念</a></li></ul></li><li><input type=checkbox id=section-42c1dc207a550598fbe925b6bb5c3c0a class=toggle>
<label for=section-42c1dc207a550598fbe925b6bb5c3c0a class=flex><a href=/docs/Apple/Frameworks/User-Notifications/>User Notifications</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/User-Notifications/UNMutableNotificationContent/>UNMutableNotificationContent</a></li></ul></li><li><input type=checkbox id=section-cf09ac325e0c76f3706f483f874c149f class=toggle>
<label for=section-cf09ac325e0c76f3706f483f874c149f class=flex><a role=button>WidgetKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/Frameworks/WidgetKit/WidgetKitActivityKit-%E5%92%8C-App-Intents-%E5%85%B3%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB/>WidgetKit、ActivityKit 和 App Intents 关系和区别</a></li><li><a href=/docs/Apple/Frameworks/WidgetKit/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/>基础概念</a></li><li><a href=/docs/Apple/Frameworks/WidgetKit/%E8%AE%A1%E6%97%B6%E5%99%A8%E5%AE%8C%E6%95%B4-demo/>计时器完整示例</a></li></ul></li></ul></li><li><input type=checkbox id=section-f47073fc741f92f56119a35ccea568f0 class=toggle>
<label for=section-f47073fc741f92f56119a35ccea568f0 class=flex><a href=/docs/Apple/Objective-C/>Objective-C</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-e4b142f907fe0957d96a31a9e2ce745a class=toggle>
<label for=section-e4b142f907fe0957d96a31a9e2ce745a class=flex><a href=/docs/Apple/UIKit/>UIKit</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Apple/UIKit/UIImpactFeedbackGenerator/>UIImpactFeedbackGenerator</a></li><li><a href=/docs/Apple/UIKit/SwiftUI-%E4%B8%AD%E4%BD%BF%E7%94%A8-UIKit/>SwiftUI 中使用 UIKit</a></li><li><a href=/docs/Apple/UIKit/UIResponder/>UIResponder</a></li><li><a href=/docs/Apple/UIKit/UIApplication/>UIApplication</a></li><li><a href=/docs/Apple/UIKit/UIUserInterfaceStyle/>UIUserInterfaceStyle</a></li><li><a href=/docs/Apple/UIKit/UIScreen/>UIScreen</a></li><li><a href=/docs/Apple/UIKit/UITabBar/>UITabBar</a></li><li><a href=/docs/Apple/UIKit/UITraitCollection/>UITraitCollection</a></li><li><a href=/docs/Apple/UIKit/UIColor/>UIColor</a></li><li><a href=/docs/Apple/UIKit/%E5%B5%8C%E5%85%A5-SwiftUI/>嵌入 SwiftUI</a></li><li><a href=/docs/Apple/UIKit/App-%E5%90%AF%E5%8A%A8/>App 启动</a></li></ul></li></ul></li><li><input type=checkbox id=section-8b1e3b5eacc93546dbf80a1905ab4eb2 class=toggle>
<label for=section-8b1e3b5eacc93546dbf80a1905ab4eb2 class=flex><a href=/docs/Golang/>Golang</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Golang/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/>语言基础</a></li><li><a href=/docs/Golang/%E6%A0%87%E5%87%86%E5%BA%93/>标准库</a></li><li><a href=/docs/Golang/%E5%91%BD%E4%BB%A4%E8%A1%8C/>命令行</a></li><li><a href=/docs/Golang/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/>代码规范</a></li><li><a href=/docs/Golang/make/>make 关键字</a></li></ul></li><li><input type=checkbox id=section-1a4d0cca162fbd6f19511f770d2cb2a8 class=toggle>
<label for=section-1a4d0cca162fbd6f19511f770d2cb2a8 class=flex><a href=/docs/Frontend/>Frontend</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-b83265a41fdb42cf3e04161f3c0ee143 class=toggle>
<label for=section-b83265a41fdb42cf3e04161f3c0ee143 class=flex><a role=button>JavaScript</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Frontend/JavaScript/%E8%AF%AD%E6%B3%95/>语法</a></li><li><a href=/docs/Frontend/JavaScript/BOM/>BOM</a></li><li><a href=/docs/Frontend/JavaScript/DOM/>DOM</a></li><li><a href=/docs/Frontend/JavaScript/reduce/>reduce</a></li></ul></li><li><input type=checkbox id=section-72c6d74c97896017204d132bdf13e6bd class=toggle>
<label for=section-72c6d74c97896017204d132bdf13e6bd class=flex><a href=/docs/Frontend/Nodejs/>Node.js</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Frontend/Nodejs/Buffer/>Buffer</a></li><li><a href=/docs/Frontend/Nodejs/inspector/>inspector</a></li></ul></li><li><input type=checkbox id=section-cd01ed2441c7ef7de30d29dac40ebb0b class=toggle>
<label for=section-cd01ed2441c7ef7de30d29dac40ebb0b class=flex><a href=/docs/Frontend/CSS/>CSS</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Frontend/CSS/transform/>transform</a></li><li><a href=/docs/Frontend/CSS/transition/>transition</a></li><li><a href=/docs/Frontend/CSS/translate/>translate</a></li><li><a href=/docs/Frontend/CSS/CSS/>position</a></li></ul></li><li><input type=checkbox id=section-90ba13b42249e1b916041d459acc5025 class=toggle>
<label for=section-90ba13b42249e1b916041d459acc5025 class=flex><a href=/docs/Frontend/TypeScript/>TypeScript</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-8a2ac6624ece646194aab245fef5537d class=toggle>
<label for=section-8a2ac6624ece646194aab245fef5537d class=flex><a role=button>关键字</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Frontend/TypeScript/%E5%85%B3%E9%94%AE%E5%AD%97/async/>async</a></li><li><a href=/docs/Frontend/TypeScript/%E5%85%B3%E9%94%AE%E5%AD%97/type/>type</a></li></ul></li><li><a href=/docs/Frontend/TypeScript/%E6%97%A0%E6%A0%87%E5%87%86%E5%BA%93/>无标准库</a></li><li><a href=/docs/Frontend/TypeScript/forEach-%E5%92%8C-map/>forEach 和 map 的区别</a></li><li><a href=/docs/Frontend/TypeScript/Promise/>Promise</a></li><li><a href=/docs/Frontend/TypeScript/Record/>Record</a></li><li><a href=/docs/Frontend/TypeScript/%E8%AF%AD%E6%B3%95/>TypeScript</a></li></ul></li><li><a href=/docs/Frontend/Chrome/>Chrome URLs</a></li><li><a href=/docs/Frontend/HTML/>HTML</a></li><li><a href=/docs/Frontend/%E5%8C%85%E7%AE%A1%E7%90%86-npm/>包管理 - npm</a></li><li><a href=/docs/Frontend/Global_Objects/>内置对象</a></li><li><a href=/docs/Frontend/react/>React</a></li><li><a href=/docs/Frontend/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/>构建工具</a></li><li><a href=/docs/Frontend/vue/>Vue</a></li><li><a href=/docs/Frontend/%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/>可视化工具</a></li><li><a href=/docs/Frontend/%E6%8F%92%E4%BB%B6/>插件</a></li><li><a href=/docs/Frontend/Deno/>Deno</a></li><li><a href=/docs/Frontend/Next/>Next.js</a></li></ul></li><li><input type=checkbox id=section-d340ad12f1a33e9d1c26aebff0ddba35 class=toggle>
<label for=section-d340ad12f1a33e9d1c26aebff0ddba35 class=flex><a href=/docs/Rust/>Rust</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Rust/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/>语言基础</a></li><li><a href=/docs/Rust/%E5%91%BD%E4%BB%A4%E8%A1%8C/>命令行</a></li></ul></li><li><input type=checkbox id=section-ff8ce5bae3ad9204a4e69042b995b916 class=toggle>
<label for=section-ff8ce5bae3ad9204a4e69042b995b916 class=flex><a role=button>软件工程</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/peopleware/>人件</a></li><li><a href=/docs/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/taoup/>Unix 编程艺术</a></li><li><a href=/docs/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E7%A8%8B%E5%BA%8F%E5%91%98%E4%BF%AE%E7%82%BC%E4%B9%8B%E9%81%93/>程序员修炼之道</a></li><li><a href=/docs/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/some-laws/>一些定律</a></li></ul></li><li><input type=checkbox id=section-50ecd1bc26a2c3e176307695d618e0f1 class=toggle>
<label for=section-50ecd1bc26a2c3e176307695d618e0f1 class=flex><a role=button>历史</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-2cd73c0ffea6d0589949220f5844b973 class=toggle>
<label for=section-2cd73c0ffea6d0589949220f5844b973 class=flex><a role=button>中国古代史</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-3ff0e94f456a361e6a51e8b7c298bd4d class=toggle>
<label for=section-3ff0e94f456a361e6a51e8b7c298bd4d class=flex><a href=/docs/%E5%8E%86%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E5%8F%A4%E4%BB%A3%E5%8F%B2/%E6%98%8E%E6%9C%9D/>明朝</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li></ul></li><li><input type=checkbox id=section-94fd4d550a854819b7f2314c4b00893f class=toggle>
<label for=section-94fd4d550a854819b7f2314c4b00893f class=flex><a role=button>英国</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/%E5%8E%86%E5%8F%B2/%E8%8B%B1%E5%9B%BD/the-UK-King-and-Queen/>英国的国王与女王</a></li></ul></li><li><input type=checkbox id=section-ef33eb76e7d0fc121ede6cf70641e52b class=toggle>
<label for=section-ef33eb76e7d0fc121ede6cf70641e52b class=flex><a role=button>俄罗斯</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-0f5f36f152c67fbc7717b442f8edb925 class=toggle>
<label for=section-0f5f36f152c67fbc7717b442f8edb925 class=flex><a role=button>法国</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-5623113ac4dfe08a4aae01776943a318 class=toggle>
<label for=section-5623113ac4dfe08a4aae01776943a318 class=flex><a href=/docs/%E5%8E%86%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E8%BF%91%E4%BB%A3%E5%8F%B2/>近代史</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-b01f907e09a40218e3f7d08a4edf574f class=toggle>
<label for=section-b01f907e09a40218e3f7d08a4edf574f class=flex><a role=button>美国</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li><li><input type=checkbox id=section-1d887c30234063cdb0be8d712b101b6a class=toggle>
<label for=section-1d887c30234063cdb0be8d712b101b6a class=flex><a role=button>日本</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul></ul></li></ul></li><li><input type=checkbox id=section-7b1792a84f93950b3fc71989f50626a3 class=toggle>
<label for=section-7b1792a84f93950b3fc71989f50626a3 class=flex><a href=/docs/Linux/>"Linux"</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Linux/%E5%91%BD%E4%BB%A4%E8%A1%8C/>命令行</a></li><li><a href=/docs/Linux/regular-expression/>正则表达式</a></li><li><a href=/docs/Linux/Shell/>Shell 脚本</a></li><li><a href=/docs/Linux/PostgreSQL/>PostgreSQL</a></li><li><a href=/docs/Linux/n8n/>n8n 介绍</a></li><li><a href=/docs/Linux/WebHook-URL/>WebHook URL 概念</a></li><li><a href=/docs/Linux/Spark/>Spark</a></li><li><a href=/docs/Linux/Linux-%E8%BF%90%E7%BB%B4/>Linux 运维</a></li><li><a href=/docs/Linux/hello-k8s/>认识下 Kubernetes</a></li><li><a href=/docs/Linux/Docker/>Docker</a></li><li><a href=/docs/Linux/git/>Git</a></li></ul></li><li><input type=checkbox id=section-c7bff5b6a28a4d4418441ba32f5a4a8a class=toggle>
<label for=section-c7bff5b6a28a4d4418441ba32f5a4a8a class=flex><a href=/docs/Clang/>C/C++</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Clang/C/>C 语言基础</a></li><li><a href=/docs/Clang/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/>系统调用</a></li><li><a href=/docs/Clang/C-%E6%A0%87%E5%87%86%E5%BA%93/>C 标准库</a></li></ul></li><li><input type=checkbox id=section-d1e6e5a3dd4382a657172754eb24eb1f class=toggle>
<label for=section-d1e6e5a3dd4382a657172754eb24eb1f class=flex><a href=/docs/Python/>Python</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><input type=checkbox id=section-cfe977120dc96c87b744c030ec0a4b96 class=toggle>
<label for=section-cfe977120dc96c87b744c030ec0a4b96 class=flex><a role=button>语言基础</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/Python/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/__call__/>`__call__` 方法的使用场景</a></li><li><a href=/docs/Python/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/typing/>Typing 模块使用指南</a></li><li><a href=/docs/Python/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/abc/>abc 模块与 abstractmethod 使用方法</a></li><li><a href=/docs/Python/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/async-%E5%92%8C-await/>async 和 await 关键字</a></li><li><a href=/docs/Python/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/asyncio/>asyncio 包的使用方法及典型例子</a></li><li><a href=/docs/Python/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/yield/>yield</a></li></ul></li><li><a href=/docs/Python/PyPI-Package-%E7%89%88%E6%9C%AC%E5%8F%B7%E8%A7%84%E8%8C%83/>PyPI Package 版本号规范</a></li><li><a href=/docs/Python/twine-%E6%89%93%E5%8C%85/>PyPI 打包工具 - twine</a></li><li><a href=/docs/Python/mypy/>Mypy - Python 静态类型检查器</a></li><li><a href=/docs/Python/%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7/>可视化工具</a></li><li><a href=/docs/Python/Numpy/>Numpy</a></li><li><a href=/docs/Python/Pandas/>Pandas</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt>
</label><strong>HTTPS 的 SSL/TLS 协议
</strong><label for=toc-control><img src=/icons/toc.svg class=book-icon alt></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#https-简介>HTTPS 简介</a><ul><li><a href=#http-的问题>HTTP 的问题</a></li><li><a href=#使用-https-的好处>使用 HTTPS 的好处</a></li><li><a href=#ssl-和-tls>SSL 和 TLS</a></li><li><a href=#ssltls-与-openssl-的关系>SSL/TLS 与 OpenSSL 的关系</a></li><li><a href=#tls-v12-和-tls-v13>TLS v1.2 和 TLS v1.3</a></li></ul></li><li><a href=#记录协议>记录协议</a><ul><li><a href=#数据分块>数据分块</a></li><li><a href=#压缩>压缩</a></li><li><a href=#加密和完整性校验>加密和完整性校验</a><ul><li><a href=#分组加密>分组加密</a></li><li><a href=#流密码>流密码</a></li><li><a href=#aead>AEAD</a></li></ul></li><li><a href=#添加消息头>添加消息头</a></li></ul></li><li><a href=#握手协议>握手协议</a><ul><li><a href=#完整的握手>完整的握手</a><ul><li><a href=#clienthello>ClientHello</a></li><li><a href=#serverhello>ServerHello</a></li><li><a href=#certificate>Certificate</a></li><li><a href=#serverkeyexchange>ServerKeyExchange</a></li><li><a href=#serverhellodone>ServerHelloDone</a></li><li><a href=#clientkeyexchange>ClientKeyExchange</a></li><li><a href=#changecipherspec>ChangeCipherSpec</a></li><li><a href=#finished>Finished</a></li></ul></li><li><a href=#互相验证的握手>互相验证的握手</a><ul><li><a href=#certificaterequest>CertificateRequest</a></li><li><a href=#certificateverify>CertificateVerify</a></li></ul></li><li><a href=#会话恢复的握手>会话恢复的握手</a><ul><li><a href=#session-id>Session ID</a></li><li><a href=#session-ticket>Session Ticket</a></li></ul></li><li><a href=#密钥协商>密钥协商</a><ul><li><a href=#rsa>RSA</a></li><li><a href=#向前保密性>向前保密性</a></li><li><a href=#预备主密钥主密钥和会话密钥>预备主密钥、主密钥和会话密钥</a></li></ul></li></ul></li><li><a href=#应用数据协议>应用数据协议</a></li><li><a href=#警报协议>警报协议</a></li><li><a href=#心跳协议>心跳协议</a></li><li><a href=#todo>Todo</a></li><li><a href=#参考>参考</a></li></ul></nav></aside></header><article class="markdown book-post"><h1><a href=/posts/https-ssl-tls-protocol/>HTTPS 的 SSL/TLS 协议</a></h1><h5>12月 16, 2021</h5><div><a href=/tags/HTTP/>HTTP</a>,
<a href=/tags/Recommended/>Recommended</a>,
<a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a>,
<a href=/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/>系统设计</a>,
<a href=/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/>密码学</a>,
<a href=/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/>浏览器</a>,
<a href=/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/>面试题</a></div><h2 id=https-简介>HTTPS 简介<a class=anchor href=#https-%e7%ae%80%e4%bb%8b>#</a></h2><p>通过上一篇的<a href=http://localhost:1313/posts/https-algorithems/>HTTPS 之密码学基础</a>，现在可以正式进入 HTTPS 的介绍了。HTTPS 指的是超文本传输安全协议（<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol <strong>S</strong>ecure），顾名思义，比 HTTP 多了一个“安全”，而这里的安全指的就是 SSL/TLS 协议了，即 HTTPS 是由 HTTP + SSL/TLS 协议组成的。</p><img src=https://cdn.yindongliang.com/uPic/LeYgoS.png style=zoom:25%><h3 id=http-的问题>HTTP 的问题<a class=anchor href=#http-%e7%9a%84%e9%97%ae%e9%a2%98>#</a></h3><p>HTTP 怎么了，我们为什么需要 HTTPS？说白了 HTTP 就是不安全，从而引发了各种问题，这个原因是由 TCP/IP 协议的实现导致的。设想在没有HTTPS 之前，整个互联网的流量都建立在 TCP/IP 的明文传输之上，数据安全问题、个人隐私问题、弹窗广告问题可想而知。</p><h3 id=使用-https-的好处>使用 HTTPS 的好处<a class=anchor href=#%e4%bd%bf%e7%94%a8-https-%e7%9a%84%e5%a5%bd%e5%a4%84>#</a></h3><ol><li>首先肯定是更加安全。</li><li>更好的 SEO 排名，Google 等搜索引擎厂商为了推广 HTTPS 的使用，为支持 HTTPS 的网站提高了权重。</li><li>提高品牌信任度，Chrome 等浏览器厂商为了推广 HTTPS，会在地址栏显示中区别对待，从而影响用户对品牌的印象。</li><li>可以通过进一步支持 HTTP/2 从而获得更好的性能，在各大浏览器厂商的实现中，使用 HTTP/2 必须基于 HTTPS。</li></ol><h3 id=ssl-和-tls>SSL 和 TLS<a class=anchor href=#ssl-%e5%92%8c-tls>#</a></h3><p>SSL（<strong>S</strong>ecure <strong>S</strong>ockets <strong>L</strong>ayer，安全套接字层）是 TLS（<strong>T</strong>ransport <strong>L</strong>ayer <strong>S</strong>ecurity，传输层安全协议）的前身，TLS 的制定建立在 SSL 之上。习惯上我们仍然把 HTTPS 的安全协议称为 SSL/TLS 协议，但是现阶段我们主要使用的是 TLS 协议，本次研究对象也以 <a href=https://datatracker.ietf.org/doc/html/rfc5246>TLS v1.2</a> 版本的实现为主、<a href=https://datatracker.ietf.org/doc/html/rfc8446>TLS v1.3</a> 版本的实现为辅进行学习。</p><h3 id=ssltls-与-openssl-的关系>SSL/TLS 与 OpenSSL 的关系<a class=anchor href=#ssltls-%e4%b8%8e-openssl-%e7%9a%84%e5%85%b3%e7%b3%bb>#</a></h3><p>SSL/TLS 是协议，规定了厂商使用 HTTPS 时的通信、加密规范，OpenSSL 是实现了协议里的功能的工具箱，提供了各种密码学安全工具的使用。</p><h3 id=tls-v12-和-tls-v13>TLS v1.2 和 TLS v1.3<a class=anchor href=#tls-v12-%e5%92%8c-tls-v13>#</a></h3><p>v1.3 相比 v1.2 也发生了很大的变化，性能也会更好，本篇暂不关注具体实现的区别，不过由于 v1.2 的广泛使用，相信两个主流版本会共存相当长的一段时间。</p><h2 id=记录协议>记录协议<a class=anchor href=#%e8%ae%b0%e5%bd%95%e5%8d%8f%e8%ae%ae>#</a></h2><blockquote class=book-hint><p>The TLS record protocol takes messages to be transmitted, fragments the data into manageable blocks, protects the records, and transmits the result. Received data is verified, decrypted, reassembled, and then delivered to higher-level clients.</p></blockquote><p>一般来说 TLS 以记录协议（Record Protocol）实现。记录层协议只关注数据传输和加密，所以有的地方也叫加密层协议，而将其他特性交给子协议，这也使得 TLS 可以扩展，伴随着记录协议可以加密数据，所有子协议的参数也都会得到保护，其核心的子协议有：</p><ul><li>握手协议（Handshake Protocol）</li><li>密钥规格变更协议（Change Cipher Spec Protocol，v1.3 已删除）</li><li>心跳协议（Heartbeat）</li><li>应用数据协议（Application Data）</li><li>警报协议（Alert Protocol）</li></ul><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>enum</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>invalid</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>change_cipher_spec</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>20</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>alert</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>21</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>handshake</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>22</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>application_data</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>23</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>heartbeat</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>24</span><span style=color:#abb2bf>),</span>  <span style=color:#8a93a5;font-style:italic>/* RFC 6520 */</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>(</span><span style=color:#d19a66>255</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>ContentType</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ContentType</span> <span style=color:#aa89ea>type</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ProtocolVersion</span> <span style=color:#aa89ea>legacy_record_version</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint16</span> <span style=color:#aa89ea>length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>opaque</span> <span style=color:#aa89ea>fragment</span><span style=color:#abb2bf>[</span><span style=color:#aa89ea>TLSPlaintext</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>length</span><span style=color:#abb2bf>];</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>TLSPlaintext</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ContentType</span> <span style=color:#aa89ea>type</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ProtocolVersion</span> <span style=color:#aa89ea>version</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint16</span> <span style=color:#aa89ea>length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>opaque</span> <span style=color:#aa89ea>fragment</span><span style=color:#abb2bf>[</span><span style=color:#aa89ea>TLSCompressed</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>length</span><span style=color:#abb2bf>];</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>TLSCompressed</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ContentType</span> <span style=color:#aa89ea>opaque_type</span> <span style=color:#54b1c7>=</span> <span style=color:#aa89ea>application_data</span><span style=color:#abb2bf>;</span> <span style=color:#8a93a5;font-style:italic>/* 23 */</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ProtocolVersion</span> <span style=color:#aa89ea>legacy_record_version</span> <span style=color:#54b1c7>=</span> <span style=color:#d19a66>0x0303</span><span style=color:#abb2bf>;</span> <span style=color:#8a93a5;font-style:italic>/* TLS v1.2 */</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint16</span> <span style=color:#aa89ea>length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>opaque</span> <span style=color:#aa89ea>encrypted_record</span><span style=color:#abb2bf>[</span><span style=color:#aa89ea>TLSCiphertext</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>length</span><span style=color:#abb2bf>];</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>TLSCiphertext</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><p>TLS 记录层主要有四部分的逻辑处理：</p><ul><li>数据分块</li><li>压缩</li><li>加密和完整性保护</li><li>添加消息头</li></ul><img src=https://cdn.yindongliang.com/uPic/kx9qzo.png style=zoom:50%><h3 id=数据分块>数据分块<a class=anchor href=#%e6%95%b0%e6%8d%ae%e5%88%86%e5%9d%97>#</a></h3><p>子协议的数据进入 TLS 记录层协议后，首先需要将消息拆分成块（Fragment），TLSPlaintext 是 TLS 记录层协议分块后的数据结构。</p><h3 id=压缩>压缩<a class=anchor href=#%e5%8e%8b%e7%bc%a9>#</a></h3><p>由于存在一些安全问题，在TLS/SSL协议中，一般不启用压缩算法。TLS 记录层协议处理 TLSPlaintext，将其转换为 TLSCompressed，如果不压缩，可以认为两者是一致的。</p><h3 id=加密和完整性校验>加密和完整性校验<a class=anchor href=#%e5%8a%a0%e5%af%86%e5%92%8c%e5%ae%8c%e6%95%b4%e6%80%a7%e6%a0%a1%e9%aa%8c>#</a></h3><p>TLSPlaintext 通过加密得到 TLSCiphertext，常用的加密方法有分组加密、流密码、AEAD 模式三种。一般是通过在加密前加上 MAC 值，保证消息的完整性。</p><h4 id=分组加密>分组加密<a class=anchor href=#%e5%88%86%e7%bb%84%e5%8a%a0%e5%af%86>#</a></h4><p>分组加密主要指的就是 AES_256_CBC_SHA256 算法。</p><h4 id=流密码>流密码<a class=anchor href=#%e6%b5%81%e5%af%86%e7%a0%81>#</a></h4><p>流密码模式也需要 HMAC 生成消息摘要。</p><h4 id=aead>AEAD<a class=anchor href=#aead>#</a></h4><p>AEAD 加密相比前两种加密方式，使用更加简单，安全性更高。因为它不需要使用者考虑 HMAC 算法，并且也不需要初始化向量与填充 padding。</p><h3 id=添加消息头>添加消息头<a class=anchor href=#%e6%b7%bb%e5%8a%a0%e6%b6%88%e6%81%af%e5%a4%b4>#</a></h3><p>每条 TLS 的记录都以一个标头和数据组成，标头包含记录内容的类型（ContentType）、协议版本（ProtocolVersion）和长度。</p><img src=https://cdn.yindongliang.com/uPic/yBHGZm.png alt=tls><p>经过加密以后，得到了 TLSCiphertext 数据结构，再添加上消息头后，统一传给 TCP 或 UDP 层。</p><h2 id=握手协议>握手协议<a class=anchor href=#%e6%8f%a1%e6%89%8b%e5%8d%8f%e8%ae%ae>#</a></h2><blockquote class=book-hint><p>The handshake protocol is used to negotiate the security parameters of a connection. Handshake messages are supplied to the TLS record layer, where they are encapsulated within one or more TLSPlaintext or TLSCiphertext structures which are processed and transmitted as specified by the current active connection state.</p></blockquote><p>握手协议用于协商连接的安全参数，握手消息被提供给 TLS 记录层，它们被封装在一个或多个 TLSPlaintext 或 TLSCiphertext 结构中被按照当前活动连接状态指定的方式处理和传输。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>enum</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>hello_request</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>client_hello</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>server_hello</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>2</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>11</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>server_key_exchange</span> <span style=color:#abb2bf>(</span><span style=color:#d19a66>12</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_request</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>13</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>server_hello_done</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>14</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_verify</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>15</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>client_key_exchange</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>16</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>finished</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>20</span><span style=color:#abb2bf>),</span> <span style=color:#abb2bf>(</span><span style=color:#d19a66>255</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>HandshakeType</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>HandshakeType</span> <span style=color:#aa89ea>msg_type</span><span style=color:#abb2bf>;</span>    <span style=color:#8a93a5;font-style:italic>/* handshake type */</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint24</span> <span style=color:#aa89ea>length</span><span style=color:#abb2bf>;</span>             <span style=color:#8a93a5;font-style:italic>/* bytes in message */</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>select</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>HandshakeType</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>hello_request</span><span style=color:#abb2bf>:</span>       <span style=color:#aa89ea>HelloRequest</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>client_hello</span><span style=color:#abb2bf>:</span>        <span style=color:#aa89ea>ClientHello</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>server_hello</span><span style=color:#abb2bf>:</span>        <span style=color:#aa89ea>ServerHello</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>certificate</span><span style=color:#abb2bf>:</span>         <span style=color:#aa89ea>Certificate</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>server_key_exchange</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>ServerKeyExchange</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>certificate_request</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>CertificateRequest</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>server_hello_done</span><span style=color:#abb2bf>:</span>   <span style=color:#aa89ea>ServerHelloDone</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>certificate_verify</span><span style=color:#abb2bf>:</span>  <span style=color:#aa89ea>CertificateVerify</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>client_key_exchange</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>ClientKeyExchange</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>finished</span><span style=color:#abb2bf>:</span>            <span style=color:#aa89ea>Finished</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>}</span> <span style=color:#aa89ea>body</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>Handshake</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><p>握手协议是 TLS 协议的核心部分，在这个过程中，通信双方通过“握手”的形式，协商连接的密钥并完成身份验证。握手的类型根据场景也分几种：</p><ol><li>完整的握手，对服务器进行身份验证。</li><li>对服务端和客户端都进行身份验证的握手。</li><li>恢复之前会话采用的简短握手。</li></ol><h3 id=完整的握手>完整的握手<a class=anchor href=#%e5%ae%8c%e6%95%b4%e7%9a%84%e6%8f%a1%e6%89%8b>#</a></h3><pre tabindex=0><code>      Client                                               Server

      ClientHello                  --------&gt;
                                                      ServerHello
                                                     Certificate*
                                               ServerKeyExchange*
                                   &lt;--------      ServerHelloDone
      ClientKeyExchange
      [ChangeCipherSpec]
      Finished                     --------&gt;
                                               [ChangeCipherSpec]
                                   &lt;--------             Finished
      Application Data             &lt;-------&gt;     Application Data</code></pre><h4 id=clienthello>ClientHello<a class=anchor href=#clienthello>#</a></h4><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ProtocolVersion</span> <span style=color:#aa89ea>client_version</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>Random</span> <span style=color:#aa89ea>random</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>SessionID</span> <span style=color:#aa89ea>session_id</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>CipherSuite</span> <span style=color:#aa89ea>cipher_suites</span><span style=color:#54b1c7>&lt;</span><span style=color:#d19a66>2..2</span><span style=color:#54b1c7>^</span><span style=color:#d19a66>16</span><span style=color:#54b1c7>-</span><span style=color:#d19a66>2</span><span style=color:#54b1c7>&gt;</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>CompressionMethod</span> <span style=color:#aa89ea>compression_methods</span><span style=color:#54b1c7>&lt;</span><span style=color:#d19a66>1..2</span><span style=color:#54b1c7>^</span><span style=color:#d19a66>8</span><span style=color:#54b1c7>-</span><span style=color:#d19a66>1</span><span style=color:#54b1c7>&gt;</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>select</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>extensions_present</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#e5c07b>false</span><span style=color:#54b1c7>:</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{};</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#e5c07b>true</span><span style=color:#54b1c7>:</span>
</span></span><span style=display:flex><span>            <span style=color:#aa89ea>Extension</span> <span style=color:#aa89ea>extensions</span><span style=color:#54b1c7>&lt;</span><span style=color:#d19a66>0..2</span><span style=color:#54b1c7>^</span><span style=color:#d19a66>16</span><span style=color:#54b1c7>-</span><span style=color:#d19a66>1</span><span style=color:#54b1c7>&gt;</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>};</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>ClientHello</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><p>Client 发送这条消息给服务端希望建立 TLS 连接，消息体一般包括：</p><ol><li>Version：客服端支持的最佳协议版本。</li><li>Random：随机数。</li><li>Session ID：第一次连接时，会话 ID 是空的，表示客户端并不希望恢复某个已存在的会话。</li><li>Cipher Suites：按照优先级顺序排列的客户端支持的密码套件列表。</li><li>Extensions：客户端传递的拓展信息列表。</li></ol><h4 id=serverhello>ServerHello<a class=anchor href=#serverhello>#</a></h4><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ProtocolVersion</span> <span style=color:#aa89ea>server_version</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>Random</span> <span style=color:#aa89ea>random</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>SessionID</span> <span style=color:#aa89ea>session_id</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>CipherSuite</span> <span style=color:#aa89ea>cipher_suite</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>CompressionMethod</span> <span style=color:#aa89ea>compression_method</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>select</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>extensions_present</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#e5c07b>false</span><span style=color:#54b1c7>:</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{};</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#e5c07b>true</span><span style=color:#54b1c7>:</span>
</span></span><span style=display:flex><span>            <span style=color:#aa89ea>Extension</span> <span style=color:#aa89ea>extensions</span><span style=color:#54b1c7>&lt;</span><span style=color:#d19a66>0..2</span><span style=color:#54b1c7>^</span><span style=color:#d19a66>16</span><span style=color:#54b1c7>-</span><span style=color:#d19a66>1</span><span style=color:#54b1c7>&gt;</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>};</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>ServerHello</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><p>服务器返回给客户端的消息，消息结构与 ClientHello 类似，只是每个字段都只有一个选项，意味着服务器的选择结果。</p><h4 id=certificate>Certificate<a class=anchor href=#certificate>#</a></h4><p>发送服务器 X.509 标准的证书链，一个目的是可以让客户端验证身份，另一个目的是通过证书的公钥可以让客户端协商出预备主密钥。</p><h4 id=serverkeyexchange>ServerKeyExchange<a class=anchor href=#serverkeyexchange>#</a></h4><p>服务端为密钥协商发送的数据。</p><h4 id=serverhellodone>ServerHelloDone<a class=anchor href=#serverhellodone>#</a></h4><p>表示服务器已将所有信息发送完毕。</p><h4 id=clientkeyexchange>ClientKeyExchange<a class=anchor href=#clientkeyexchange>#</a></h4><p>表示客户端为密钥协商提供的数据。</p><h4 id=changecipherspec>ChangeCipherSpec<a class=anchor href=#changecipherspec>#</a></h4><p>表示发送端已经生成加密密钥，并且切换到了加密模式，客户端和服务器在条件成熟时都会发送这个消息。</p><h4 id=finished>Finished<a class=anchor href=#finished>#</a></h4><p>意味着握手已经完成，消息内容是加密的。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>enum</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>hello_request</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>client_hello</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>server_hello</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>2</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>11</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>server_key_exchange</span> <span style=color:#abb2bf>(</span><span style=color:#d19a66>12</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_request</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>13</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>server_hello_done</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>14</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_verify</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>15</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>client_key_exchange</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>16</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>finished</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>20</span><span style=color:#abb2bf>),</span> <span style=color:#abb2bf>(</span><span style=color:#d19a66>255</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>HandshakeType</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>HandshakeType</span> <span style=color:#aa89ea>msg_type</span><span style=color:#abb2bf>;</span>    <span style=color:#8a93a5;font-style:italic>/* handshake type */</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint24</span> <span style=color:#aa89ea>length</span><span style=color:#abb2bf>;</span>             <span style=color:#8a93a5;font-style:italic>/* bytes in message */</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>select</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>HandshakeType</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>hello_request</span><span style=color:#abb2bf>:</span>       <span style=color:#aa89ea>HelloRequest</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>client_hello</span><span style=color:#abb2bf>:</span>        <span style=color:#aa89ea>ClientHello</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>server_hello</span><span style=color:#abb2bf>:</span>        <span style=color:#aa89ea>ServerHello</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>certificate</span><span style=color:#abb2bf>:</span>         <span style=color:#aa89ea>Certificate</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>server_key_exchange</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>ServerKeyExchange</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>certificate_request</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>CertificateRequest</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>server_hello_done</span><span style=color:#abb2bf>:</span>   <span style=color:#aa89ea>ServerHelloDone</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>certificate_verify</span><span style=color:#abb2bf>:</span>  <span style=color:#aa89ea>CertificateVerify</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>client_key_exchange</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>ClientKeyExchange</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>case</span> <span style=color:#f5a40d>finished</span><span style=color:#abb2bf>:</span>            <span style=color:#aa89ea>Finished</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>}</span> <span style=color:#aa89ea>body</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>Handshake</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><h3 id=互相验证的握手>互相验证的握手<a class=anchor href=#%e4%ba%92%e7%9b%b8%e9%aa%8c%e8%af%81%e7%9a%84%e6%8f%a1%e6%89%8b>#</a></h3><pre tabindex=0><code>      Client                                               Server

      ClientHello                  --------&gt;
                                                      ServerHello
                                                     Certificate*
                                               ServerKeyExchange*
                                              CertificateRequest*
                                   &lt;--------      ServerHelloDone
      Certificate*
      ClientKeyExchange
      CertificateVerify*
      [ChangeCipherSpec]
      Finished                     --------&gt;
                                               [ChangeCipherSpec]
                                   &lt;--------             Finished
      Application Data             &lt;-------&gt;     Application Data</code></pre><p>和上个流程相比，多了两个类型的消息。</p><h4 id=certificaterequest>CertificateRequest<a class=anchor href=#certificaterequest>#</a></h4><p>服务器请求对客户端进行身份验证，并发送其接受的证书公钥和签名算法。</p><h4 id=certificateverify>CertificateVerify<a class=anchor href=#certificateverify>#</a></h4><p>消息中包含之前所有握手消息的签名，可以证明客户端拥有的私钥和之前发送的客户端证书中的公钥相对应。</p><h3 id=会话恢复的握手>会话恢复的握手<a class=anchor href=#%e4%bc%9a%e8%af%9d%e6%81%a2%e5%a4%8d%e7%9a%84%e6%8f%a1%e6%89%8b>#</a></h3><p>为了避免每次都需要完整的握手，TLS 也支持了会话恢复机制，以减少完整握手的网络资源和时间的消耗。</p><pre tabindex=0><code>      Client                                                Server

      ClientHello                   --------&gt;
                                                       ServerHello
                                                [ChangeCipherSpec]
                                    &lt;--------             Finished
      [ChangeCipherSpec]
      Finished                      --------&gt;
      Application Data              &lt;-------&gt;     Application Data</code></pre><h4 id=session-id>Session ID<a class=anchor href=#session-id>#</a></h4><p>在一次完整协商的连接断开时，客户端和服务器都会将会话的 Session ID 保存一段时间。但是这样 Session ID 有两个很明显的缺点：</p><ol><li>Session ID 缓存在服务器会占用内存空间。</li><li>如果是分布式服务器架构，Session ID 的机制就失效了。</li></ol><p>于是又出现了会话票证（Session Ticket）机制来替代 Session ID 机制。</p><h4 id=session-ticket>Session Ticket<a class=anchor href=#session-ticket>#</a></h4><p>SessionTicket 的原理很简单，服务器将会话信息加密后以票证（ticket）的方式发送给客户端，服务器本身不存储会话信息。客户端接收到票据后将其存储到内存中，如果想恢复会话，则下一次连接的是将票据发送给服务器端，服务器端解密后，如果确认无误则表示可以进行会话恢复，完成了一次简短的握手。</p><h3 id=密钥协商>密钥协商<a class=anchor href=#%e5%af%86%e9%92%a5%e5%8d%8f%e5%95%86>#</a></h3><p>有了上面的握手流程，可以知道握手最重要的目的就是进行密钥协商，常见的密钥协商算法有：RSA、DHE_RSA、ECDHE_RSA 和 ECDHE_ECDSA。</p><h4 id=rsa>RSA<a class=anchor href=#rsa>#</a></h4><p>上篇已经说过 RSA 公开密钥严格上不算是密钥协商算法，因为这种只在客户端生成预备主密钥的机制太简单还是存在安全问题，攻击者不需要实时进行攻击，只要记录流量，等待有朝一日拿到密钥就可以解密之前所有的数据，这四种算法中，除了 RSA 算法，其他都不受这个问题影响，即向前保密性。</p><h4 id=向前保密性>向前保密性<a class=anchor href=#%e5%90%91%e5%89%8d%e4%bf%9d%e5%af%86%e6%80%a7>#</a></h4><p>用于加密预备主密钥的服务器公钥（证书公钥），一般多年不变，任何能够接触到对应私钥的人都可以恢复预备主密钥，并构建相同的主密钥，从而危害到会话安全性，即不具备向前保密性。</p><h4 id=预备主密钥主密钥和会话密钥>预备主密钥、主密钥和会话密钥<a class=anchor href=#%e9%a2%84%e5%a4%87%e4%b8%bb%e5%af%86%e9%92%a5%e4%b8%bb%e5%af%86%e9%92%a5%e5%92%8c%e4%bc%9a%e8%af%9d%e5%af%86%e9%92%a5>#</a></h4><p>密钥协商场景里，协商的结果是预备主密钥（pre master secret），用这个值进而可以得到主密钥（master secret）的值，然后再通过主密钥得到会话密钥（密钥块，key_block）从而进行 TLS 通信。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>ConnectionEnd</span>          <span style=color:#aa89ea>entity</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>PRFAlgorithm</span>           <span style=color:#aa89ea>prf_algorithm</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>BulkCipherAlgorithm</span>    <span style=color:#aa89ea>bulk_cipher_algorithm</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>CipherType</span>             <span style=color:#aa89ea>cipher_type</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint8</span>                  <span style=color:#aa89ea>enc_key_length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint8</span>                  <span style=color:#aa89ea>block_length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint8</span>                  <span style=color:#aa89ea>fixed_iv_length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint8</span>                  <span style=color:#aa89ea>record_iv_length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>MACAlgorithm</span>           <span style=color:#aa89ea>mac_algorithm</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint8</span>                  <span style=color:#aa89ea>mac_length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>uint8</span>                  <span style=color:#aa89ea>mac_key_length</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>CompressionMethod</span>      <span style=color:#aa89ea>compression_algorithm</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>opaque</span>                 <span style=color:#aa89ea>master_secret</span><span style=color:#abb2bf>[</span><span style=color:#d19a66>48</span><span style=color:#abb2bf>];</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>opaque</span>                 <span style=color:#aa89ea>client_random</span><span style=color:#abb2bf>[</span><span style=color:#d19a66>32</span><span style=color:#abb2bf>];</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>opaque</span>                 <span style=color:#aa89ea>server_random</span><span style=color:#abb2bf>[</span><span style=color:#d19a66>32</span><span style=color:#abb2bf>];</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>SecurityParameters</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><p>主密钥是由预备主密钥、ClientHello.random 和 ServerHello.random 通过 PRF（伪随机函数）函数生成的，主密钥长度是 48 字节。一旦主密钥确定，预备主密钥就会从客户端和服务端删除，避免攻击者获取预备主密钥，从而以相同的算法生成主密钥和会话密钥。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#aa89ea>master_secret</span> <span style=color:#54b1c7>=</span> <span style=color:#aa89ea>PRF</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>pre_master_secret</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>                    <span style=color:#98c379>&#34;master secret&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>                    <span style=color:#aa89ea>ClientHello</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>random</span> <span style=color:#54b1c7>+</span> <span style=color:#aa89ea>ServerHello</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>random</span><span style=color:#abb2bf>)[</span><span style=color:#d19a66>0..47</span><span style=color:#abb2bf>];</span></span></span></code></pre></div><p>会话密钥是由主密钥、SecurityParameters.server_random 和 SecurityParameters.client_random 数通过 PRF 函数来生成，会话密钥里面包含对称加密密钥、消息认证和 CBC 模式的初始化向量，对于非 CBC 模式的加密算法来说，就没有用到这个初始化向量。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#aa89ea>key_block</span> <span style=color:#54b1c7>=</span> <span style=color:#aa89ea>PRF</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>SecurityParameters</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>master_secret</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>                <span style=color:#98c379>&#34;key expansion&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>                <span style=color:#aa89ea>SecurityParameters</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>server_random</span> <span style=color:#54b1c7>+</span>
</span></span><span style=display:flex><span>                <span style=color:#aa89ea>SecurityParameters</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>client_random</span><span style=color:#abb2bf>);</span></span></span></code></pre></div><p>Session ID 缓存和 Session Ticket 里面保存的也是主密钥，而不是会话密钥，这样每次会话复用的时候再用双方的随机数和主密钥导出会话密钥，从而实现每次加密通信的会话密钥不一样，即使一个会话的主密钥泄露了或者被破解了也不会影响到另一个会话。</p><h2 id=应用数据协议>应用数据协议<a class=anchor href=#%e5%ba%94%e7%94%a8%e6%95%b0%e6%8d%ae%e5%8d%8f%e8%ae%ae>#</a></h2><p>应用数据协议就是 TLS/SSL 记录层协议的上层协议，包括 HTTP、FTP、SMTP 等应用层协议。TLS/SSL 协议能够无缝地处理应用层数据，TLS 记录层协议密码学保护的主要信息就是应用层协议数据，其他子协议不进行加密保护。</p><h2 id=警报协议>警报协议<a class=anchor href=#%e8%ad%a6%e6%8a%a5%e5%8d%8f%e8%ae%ae>#</a></h2><p>警报协议以一种简单的机制告知对端通信出现异常情况，通常会伴随着关闭连接（close_notify）的描述。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#76a9f9>enum</span> <span style=color:#abb2bf>{</span> <span style=color:#00b1f7>warning</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>fatal</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>2</span><span style=color:#abb2bf>),</span> <span style=color:#abb2bf>(</span><span style=color:#d19a66>255</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>}</span> <span style=color:#aa89ea>AlertLevel</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>enum</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>close_notify</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>unexpected_message</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>10</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>bad_record_mac</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>20</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>decryption_failed_RESERVED</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>21</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>record_overflow</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>22</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>decompression_failure</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>30</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>handshake_failure</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>40</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>no_certificate_RESERVED</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>41</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>bad_certificate</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>42</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>unsupported_certificate</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>43</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_revoked</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>44</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_expired</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>45</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>certificate_unknown</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>46</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>illegal_parameter</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>47</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>unknown_ca</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>48</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>access_denied</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>49</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>decode_error</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>50</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>decrypt_error</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>51</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>export_restriction_RESERVED</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>60</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>protocol_version</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>70</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>insufficient_security</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>71</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>internal_error</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>80</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>user_canceled</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>90</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>no_renegotiation</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>100</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>    <span style=color:#00b1f7>unsupported_extension</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>110</span><span style=color:#abb2bf>),</span>           <span style=color:#8a93a5;font-style:italic>/* new */</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>(</span><span style=color:#d19a66>255</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>AlertDescription</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>AlertLevel</span> <span style=color:#aa89ea>level</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>AlertDescription</span> <span style=color:#aa89ea>description</span><span style=color:#abb2bf>;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span> <span style=color:#aa89ea>Alert</span><span style=color:#abb2bf>;</span></span></span></code></pre></div><h2 id=心跳协议>心跳协议<a class=anchor href=#%e5%bf%83%e8%b7%b3%e5%8d%8f%e8%ae%ae>#</a></h2><p>心跳（Heartbeat）协议主要用于连接保活（尤其是基于 UDP 的 DLTS）和发现 LTS 和 ULTS 的路径最大传输单元（PMTU），著名的心跳出血（Heartbleed）攻击也是利用了 OpenSSL 在此协议上的一个实现上的漏洞，导致敏感数据从内存溢出。</p><h2 id=todo>Todo<a class=anchor href=#todo>#</a></h2><p>现在其实还不算完，显然 HTTPS 的东西确实太多了，本篇并没有深入到每一步的细节上深究，只是达到了我目前暂时的目的：了解 HTTPS 相关概念，未来需要做的事情还有很多：</p><ul><li><input disabled type=checkbox> 有了现在的概念，需要看看实际的抓包是怎样的？</li><li><input disabled type=checkbox> 交互细节，细化到每一步消息字段的变化。</li><li><input disabled type=checkbox> OpenSSL 相关实战。</li><li><input disabled type=checkbox> 部署一个 HTTPS 网站。</li></ul><h2 id=参考>参考<a class=anchor href=#%e5%8f%82%e8%80%83>#</a></h2><p><a href=https://book.douban.com/subject/26265544/>图解密码技术</a><br>加密相关的理论基础，属于必读了。</p><p><a href=https://book.douban.com/subject/30250772/>深入浅出 HTTPS</a><br>这本书循序渐进讲解了 HTTPS，从理论到实践再到理论再到实践，可能因为 HTTPS 本身就比较复杂，所以书中的结构内容也比较混乱，但是我需要一些细节的东西最后都找到了，可以多读几遍。</p><p><a href=https://book.douban.com/subject/10746113/>HTTPS 权威指南</a><br>这本书大量介绍了历史上针对 HTTPS 的攻击手段，非常有意思，推荐阅读。</p><p>RFC 文档，这里有最权威的握手流程图和数据结构体。</p><ul><li><a href=https://datatracker.ietf.org/doc/html/rfc8446>The Transport Layer Security (TLS) Protocol Version 1.3</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc5246>The Transport Layer Security (TLS) Protocol Version 1.2</a></li></ul></article><div id=react-root></div><div><h5 class=post-after>本文共 4340 字，上次修改于 Oct 18, 2025，以 <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh>CC 署名-非商业性使用-禁止演绎 4.0 国际</a> 协议进行许可。</h5><div id=navigation><a class="nav nav-left" href=https://yindongliang.com/posts/https-algorithems/ title="上一篇：HTTPS 的密码学基础"><i class=fa-left></i></a>
<a class="nav nav-right" href=https://yindongliang.com/posts/http2-101/ title="下一篇：HTTP/2 概览"><i class=fa-right></i></a></div><div id=navigation-mobile><p>上一篇：<a href=https://yindongliang.com/posts/https-algorithems/>HTTPS 的密码学基础</a></p><p>下一篇：<a href=https://yindongliang.com/posts/http2-101/>HTTP/2 概览</a></p></div><h2 style=color:darkgrey>相关文章</h2><div class=post><p><h3><time style=color:darkgrey>2021-12-02</time> » <a href=/posts/https-algorithems/>HTTPS 的密码学基础</a></h3></p></div><div class=post><p><h3><time style=color:darkgrey>2021-08-21</time> » <a href=/posts/http-cross-domain-problem/>跨域相关问题</a></h3></p></div><div class=post><p><h3><time style=color:darkgrey>2021-06-12</time> » <a href=/posts/http-caching-in-browser/>浏览器中的 HTTP 缓存使用策略</a></h3></p></div><div class=post><p><h3><time style=color:darkgrey>2020-09-22</time> » <a href=/posts/hello-protobuf/>了解下 Protobuf 相关概念</a></h3></p></div><div class=post><p><h3><time style=color:darkgrey>2019-10-11</time> » <a href=/posts/talk-about-graphql/>说说实际工作中 GraphQL 的使用体验</a></h3></p></div><script src=https://giscus.app/client.js data-repo=tcitry/tcitry.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNDc2MzI2MTk=" data-category=Announcements data-category-id=DIC_kwDOCMyx684COMlk data-mapping=og:title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#https-简介>HTTPS 简介</a><ul><li><a href=#http-的问题>HTTP 的问题</a></li><li><a href=#使用-https-的好处>使用 HTTPS 的好处</a></li><li><a href=#ssl-和-tls>SSL 和 TLS</a></li><li><a href=#ssltls-与-openssl-的关系>SSL/TLS 与 OpenSSL 的关系</a></li><li><a href=#tls-v12-和-tls-v13>TLS v1.2 和 TLS v1.3</a></li></ul></li><li><a href=#记录协议>记录协议</a><ul><li><a href=#数据分块>数据分块</a></li><li><a href=#压缩>压缩</a></li><li><a href=#加密和完整性校验>加密和完整性校验</a><ul><li><a href=#分组加密>分组加密</a></li><li><a href=#流密码>流密码</a></li><li><a href=#aead>AEAD</a></li></ul></li><li><a href=#添加消息头>添加消息头</a></li></ul></li><li><a href=#握手协议>握手协议</a><ul><li><a href=#完整的握手>完整的握手</a><ul><li><a href=#clienthello>ClientHello</a></li><li><a href=#serverhello>ServerHello</a></li><li><a href=#certificate>Certificate</a></li><li><a href=#serverkeyexchange>ServerKeyExchange</a></li><li><a href=#serverhellodone>ServerHelloDone</a></li><li><a href=#clientkeyexchange>ClientKeyExchange</a></li><li><a href=#changecipherspec>ChangeCipherSpec</a></li><li><a href=#finished>Finished</a></li></ul></li><li><a href=#互相验证的握手>互相验证的握手</a><ul><li><a href=#certificaterequest>CertificateRequest</a></li><li><a href=#certificateverify>CertificateVerify</a></li></ul></li><li><a href=#会话恢复的握手>会话恢复的握手</a><ul><li><a href=#session-id>Session ID</a></li><li><a href=#session-ticket>Session Ticket</a></li></ul></li><li><a href=#密钥协商>密钥协商</a><ul><li><a href=#rsa>RSA</a></li><li><a href=#向前保密性>向前保密性</a></li><li><a href=#预备主密钥主密钥和会话密钥>预备主密钥、主密钥和会话密钥</a></li></ul></li></ul></li><li><a href=#应用数据协议>应用数据协议</a></li><li><a href=#警报协议>警报协议</a></li><li><a href=#心跳协议>心跳协议</a></li><li><a href=#todo>Todo</a></li><li><a href=#参考>参考</a></li></ul></nav></div></aside></main><script src=/gumshoe.polyfills.min.js></script><script>new Gumshoe(".book-toc a",{nested:!0})</script><style>.book-toc li.active>a{color:#8250df}</style><script>document.onkeydown=function(e){if(e.code==="ArrowLeft"){let e=document.getElementsByClassName("nav nav-left");e.length>0&&e[0].hasAttribute("href")&&window.open(e[0].href,"_self")}else if(e.code==="ArrowRight"){let e=document.getElementsByClassName("nav nav-right");e.length>0&&e[0].hasAttribute("href")&&window.open(e[0].href,"_self")}}</script><div id=search-container><div id=search-dialog><div id=search></div></div></div><link href=/pagefind/pagefind-ui.css rel=stylesheet><script src=/pagefind/pagefind-ui.js type=text/javascript></script><script>let pagefindUI=null;const searchContainer=document.getElementById("search-container");searchContainer.addEventListener("click",function(e){e.target===searchContainer&&closeSearch()}),window.openSearch=function(){!pagefindUI&&typeof PagefindUI!="undefined"&&(pagefindUI=new PagefindUI({element:"#search",showSubResults:!0,showImages:!0,resetStyles:!1,autofocus:!0})),searchContainer.style.display="flex",setTimeout(()=>{const e=document.querySelector("#search .pagefind-ui__search-input");e&&e.focus()},100)},window.closeSearch=function(){searchContainer.style.display="none"},document.addEventListener("keydown",function(e){(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),openSearch()),e.key==="Escape"&&searchContainer.style.display==="flex"&&closeSearch()})</script><link rel=stylesheet href=/katex/katex.min.css><script src=/katex/katex.min.js></script><script src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script>ts=document.getElementsByTagName("a");for(const e of ts)e.href&&!(e.href.startsWith("http://localhost")|e.href.startsWith("https://yindongliang.com/"))&&(e.target="_blank",e.rel="noopener noreferrer")</script></body></html>